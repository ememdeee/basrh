<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Vehicle Description</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/lucide@latest"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Chivo:ital,wght@0,100..900;1,100..900&display=swap" rel="stylesheet">
</head>
<style>
    body * {
        font-family: 'Chivo', sans-serif;
        transition: all 0.3s ease-in-out;
    }
    .grayyedBG-1 {
        background-image: url('assets/motif-grayed.svg');
        background-repeat: repeat;
        background-size: 250px 250px;
    }
    .grayyedBG-2 {
        background-image: url('assets/motif-grayed.svg');
        background-repeat: repeat;
        background-size: 350px 350px;
    }

    .grayyedBG-1-red {
        background-image: linear-gradient(rgba(150, 0, 0, 0.1), rgba(150, 0, 0, 0.1)), url('assets/motif-grayed.svg');
        background-repeat: repeat;
        background-size: 250px 250px;
    }

    .grayyedBG-1-blue {
        background-image: linear-gradient(rgba(206, 227, 229, 0.1), rgba(206, 227, 229, 0.1)), url('assets/motif-grayed.svg');
        background-repeat: repeat;
        background-size: 350px 350px;
    }

    .hover-shadow-orange {
        transition: all 0.3s ease;
    }

    .hover-shadow-orange:hover {
        box-shadow: 0 10px 15px -3px #f2e5d7, 0 4px 6px -4px #f2e5d7;
    }


    @media (max-width: 768px) {
        .sidebar {
            transform: translateX(-100%);
            z-index: 50;
        }
        .sidebar.active {
            transform: translateX(0);
        }
    }

    /* Modern scrollbar styling */
    .custom-scrollbar {
        /* Firefox */
        scrollbar-width: thin;
        scrollbar-color: #d3985e73 #F2E5D7;
    }

    /* Chrome, Edge, and Safari */
    .custom-scrollbar::-webkit-scrollbar {
        width: 6px;
        height: 6px;
    }

    .custom-scrollbar::-webkit-scrollbar-track {
        background: #F2E5D7;
        border-radius: 20px;
    }

    .custom-scrollbar::-webkit-scrollbar-thumb {
        background-color: #A67C52;
        border-radius: 20px;
        border: 2px solid #F2E5D7;
    }

    .custom-scrollbar::-webkit-scrollbar-thumb:hover {
        background-color: #8B5E3C;
    }

    /* For older browsers or as a fallback */
    .custom-scrollbar {
        scrollbar-face-color: #d3985e73;
        scrollbar-track-color: #F2E5D7;
    }

    @media print {
        @page {
            size: A4 portrait; /* Standard portrait layout */
            margin: 10mm; /* Optional: adjust for printer margins */
        }


        /* Ensure colors and styles for print */
        *:not(.custom-break):not(.custom-break *) {
            page-break-inside: avoid; /* Prevent page breaks inside elements */
        }
        * {
            color-adjust: exact; /* Ensure consistent color in print */
            -webkit-print-color-adjust: exact; /* Safari/Chrome */
            print-color-adjust: exact; /* Standard */
        }
        
        .break-inside{
            page-break-inside: auto; 
        }
        .break-inside *{
            page-break-inside: avoid; 
        }

        /* Hide elements not needed for print */
        .no-print {
            display: none !important;
        }
        .print-only {
            display: block !important;
        }

        #main-content{
            margin: 0 !important;
        }
        .thumbnails{
            display: grid !important;
            overflow: hidden !important;
        }
        .thumbnails .thumbnail{
            height: 8rem !important;
        }

        .print-page {
            page-break-before: always; /* For older browsers */
            break-before: page;       /* Modern standard */
        }
    }
</style>

<!-- global script -->
<script>
    function createNoRecordsMessage(recordType = '') {
        // Create container
        const messageContainer = document.createElement('div');
        messageContainer.className = 'bg-[#FEFADC] border border-[#E6E0BC] rounded-md p-4 -mt-2 flex items-center gap-2';
        
        // Create icon container
        const icon = document.createElement('span');
        icon.className = 'text-green-600';
        icon.innerHTML = `
            <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <path d="M20 6L9 17l-5-5"/>
            </svg>
        `;
        
        // Create message text
        const message = document.createElement('span');
        message.className = 'text-gray-800';
        message.textContent = recordType ? `No ${recordType} Records Found!` : 'No Problems Found!';
        
        // Assemble the message
        messageContainer.appendChild(icon);
        messageContainer.appendChild(message);
        
        return messageContainer;
    }
    function bannerForm(type, id, vin, email, phone, errorTextElement) {
        // Check if VIN length is 5-13 characters
        const vinValid = vin.length >= 5 && vin.length <= 13;

        // Check if email is valid
        const emailValid = /^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(email);

        // Check if phone is valid (8-13 digits)
        const phoneValid = /^\d{8,13}$/.test(phone);

        if (!vinValid || !emailValid || !phoneValid) {
            let errorMessage = '';
            if (!vinValid) errorMessage += 'VIN must be 5-13 characters long. ';
            if (!emailValid) errorMessage += 'Please enter a valid email address. ';
            if (!phoneValid) errorMessage += 'Phone number must be 8-13 digits. ';

            errorTextElement.textContent = errorMessage.trim();
        } else {
            // If all inputs are valid
            errorTextElement.textContent = ''; // Clear any previous error messages
            console.log('Form Data:', { type, id, vin, email, phone });

            // Construct the URL with form data
            const redirectUrl = `https://classicdecoder.com/vehicle/preview?type=${type}&vin=${encodeURIComponent(vin)}&email=${encodeURIComponent(email)}&phone=${encodeURIComponent(phone)}&wpPage=newReport`;
            
            // Open the URL in a new tab
            window.open(redirectUrl, '_blank');
        }
    }
</script>

<body class="bg-[#FFFDF5] p-0 m-auto max-w-[1440px]">
    <!-- Mobile Toggle Button -->
<button id="sidebarToggle" class="fixed z-30 md:hidden bg-[#2B2B2B] text-white p-3 rounded-full shadow-lg bottom-6 left-6 no-print">
    <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" class="w-6 h-6">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16" />
    </svg>
</button>

<!-- Sidebar -->
<div id="sidebar" class="fixed flex flex-col max-h-full md:top-2 top-0 h-full md:h-fit w-80 bg-sidebar-bg bg-[#f2e5d7] md:bg-[#F2E5D7CC] shadow-lg rounded-md overflow-y-auto transition-transform duration-300 ease-in-out p-4 pt-7 md:p-4 -translate-x-full md:translate-x-0 z-40 no-print">
    <button id="closeSidebar" class="md:hidden absolute top-4 right-4 text-gray-500 hover:text-gray-700">
        <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" class="w-6 h-6">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12" />
        </svg>
    </button>
    <div class="mb-4 hidden md:block">
        <h2 class="text-2xl font-bold text-center">Vehicle History Report</h2>
        <p class="text-xl text-gray-600 mt-1 mb-4 text-center">Report generated: <span class="text-nowrap whitespace-nowrap">12-12-2024</span></p>
        <p class="text-xl mb-4 text-center">Share your report</p>
        
        <!-- Social Icons Placeholder -->
        <div class="flex gap-2 mb-4">
            <span onclick="copyURL()" class="w-8 h-8 transition-all duration-300 ease-in-out hover:-translate-y-1 hover:shadow-lg hover:shadow-[#D5B002]/20 rounded-full cursor-pointer">
                <img src="assets/copy.svg" class="w-full h-auto" alt="Copy">
            </span>
            <a href="https://www.facebook.com/classicdecodercom" class="w-8 h-8 transition-all duration-300 ease-in-out hover:-translate-y-1 hover:shadow-lg hover:shadow-[#D5B002]/20 rounded-full" target="_blank">
                <img src="assets/facebook.svg" class="w-full h-auto" alt="Facebook">
            </a>
            <a href="https://twitter.com/ClassicDecoder" class="w-8 h-8 transition-all duration-300 ease-in-out hover:-translate-y-1 hover:shadow-lg hover:shadow-[#D5B002]/20 rounded-full" target="_blank">
                <img src="assets/twitter.svg" class="w-full h-auto" alt="Twitter">
            </a>
            <a href="mailto:support@classicdecoder.com" class="w-8 h-8 transition-all duration-300 ease-in-out hover:-translate-y-1 hover:shadow-lg hover:shadow-[#D5B002]/20 rounded-full" target="_blank">
                <img src="assets/gmail.svg" class="w-full h-auto" alt="Gmail">
            </a>
            <a href="https://www.linkedin.com/company/classicdecoder" class="w-8 h-8 transition-all duration-300 ease-in-out hover:-translate-y-1 hover:shadow-lg hover:shadow-[#D5B002]/20 rounded-full" target="_blank">
                <img src="assets/linkedin.svg" class="w-full h-auto" alt="LinkedIn">
            </a>
            <a href="https://www.pinterest.com/classicdecoder/" class="w-8 h-8 transition-all duration-300 ease-in-out hover:-translate-y-1 hover:shadow-lg hover:shadow-[#D5B002]/20 rounded-full" target="_blank">
                <img src="assets/pinterest.svg" class="w-full h-auto" alt="Pinterest">
            </a>
            <a href="https://secure.livechatinc.com/licence/10186117/v2/open_chat.cgi?groups=0" class="w-8 h-8 transition-all duration-300 ease-in-out hover:-translate-y-1 hover:shadow-lg hover:shadow-[#D5B002]/20 rounded-full" target="_blank">
                <img src="assets/livechat.svg" class="w-full h-auto" alt="LiveChat">
            </a>
        </div>

        <button class="w-full bg-[#2B2B2B] text-white py-2 px-4 rounded">
            Download Report
        </button>
    </div>

    <!-- Navigation Links -->
    <nav class="space-y-1 overflow-y-scroll custom-scrollbar" id="navLinks"></nav>
</div>

<script>
    // Navigation Links Data
    const navLinks = [
        'Standard Specifications',
        'Vehicle Summary',
        'Ownership Usage',
        'Ownership History',
        'Title History',
        'Accident Records (New)',
        'Theft Records (New)',
        'Lien/ Impound/ Export',
        'Junk Salvage Records',
        'Salvage Auction Records',
        'Sale Records',
        'Auction History',
        'Sales Listing History', 
        'Title Brand Check',
        'Title Brand Checks',
        'Market Value',
        'Key Incidents',
        'Mileage Records',
        'Accident Records',
        'Damage Verification',
        'Theft Records',
        'Lien/Loan Records',
        'Detailed Vehicle History'
    ];

    // Generate Navigation Links
    document.getElementById('navLinks').innerHTML = navLinks.map(link => 
        `<a href="#${link.replace(/\s+/g, '-').toLowerCase()}" class="block py-2 px-4 hover:bg-[#ecd2b5] rounded transition-colors duration-200" data-section="${link}">${link}</a>`
    ).join('');

    // Sidebar toggle functionality
    const sidebar = document.getElementById('sidebar');
    const sidebarToggle = document.getElementById('sidebarToggle');
    const closeSidebar = document.getElementById('closeSidebar');

    sidebarToggle.addEventListener('click', () => {
        sidebar.classList.toggle('-translate-x-full');
    });

    closeSidebar.addEventListener('click', () => {
        sidebar.classList.add('-translate-x-full');
    });

    // Close sidebar when clicking outside on mobile
    document.addEventListener('click', (e) => {
        if (window.innerWidth <= 768) {
            if (!sidebar.contains(e.target) && !sidebarToggle.contains(e.target)) {
                sidebar.classList.add('-translate-x-full');
            }
        }
    });

    // Update sidebar visibility on window resize
    window.addEventListener('resize', () => {
        if (window.innerWidth > 768) {
            sidebar.classList.remove('-translate-x-full');
        } else {
            sidebar.classList.add('-translate-x-full');
        }
    });

    // Function to update active link
    function updateActiveLink() {
        const sections = document.querySelectorAll('section[section-name]');
        const navLinks = document.querySelectorAll('#navLinks a');

        let currentSection = '';

        sections.forEach(section => {
            const sectionTop = section.offsetTop;
            const sectionHeight = section.clientHeight;
            if (window.pageYOffset >= sectionTop - 200 && window.pageYOffset < sectionTop + sectionHeight - 200) {
                currentSection = section.getAttribute('section-name');
            }
        });

        navLinks.forEach(link => {
            if (link.getAttribute('data-section') === currentSection) {
                link.classList.add('bg-[#ecd2b5]', 'font-semibold');
            } else {
                link.classList.remove('bg-[#ecd2b5]', 'font-semibold');
            }
        });
    }

    // Update active link on scroll
    window.addEventListener('scroll', updateActiveLink);

    // Initial call to set active link
    updateActiveLink();

    // Smooth scrolling functionality
    // Smooth scrolling functionality
document.querySelectorAll('#navLinks a').forEach(link => {
    link.addEventListener('click', function(e) {
        e.preventDefault();
        const targetSectionName = this.getAttribute('data-section');
        const targetSection = document.querySelector(`section[section-name="${targetSectionName}"]`);
        
        if (targetSection) {
            targetSection.scrollIntoView({
                behavior: 'smooth'
            });
            
            // Close sidebar on mobile after clicking a link
            if (window.innerWidth <= 768) {
                sidebar.classList.add('-translate-x-full');
            }
        }
    });
});



    // Initialize Lucide icons
    lucide.createIcons();
</script>

    <!-- Main Content -->
    <div id="main-content" class="md:ml-80 transition-all duration-300 ease-in-out">
        <!-- share button -->
        <div class="block md:hidden mb-2 px-2 py-6 text-center justify-center bg-[#F2E5D7CC] no-print">
            <h2 class="text-2xl font-bold">Vehicle History Report</h2>
            <p class="text-lg text-gray-600">Report generated: 12-12-2024</p>
            <p class="text-lg mt-2 mb-4">Share your report</p>
            
            <!-- Social Icons Placeholder -->
            <div class="flex gap-4 mb-4 justify-center">
                <span onclick="copyURL()" href="#" class="w-7 h-7 transition-all duration-300 ease-in-out hover:-translate-y-1 hover:shadow-lg hover:shadow-[#D5B002]/20 rounded-full cursor-pointer">
                    <img src="assets/copy.svg" class="w-full h-auto" alt="Copy"></img>
                </span>
                <a href="https://www.facebook.com/classicdecodercom" class="w-7 h-7 transition-all duration-300 ease-in-out hover:-translate-y-1 hover:shadow-lg hover:shadow-[#D5B002]/20 rounded-full" target="_blank">
                    <img src="assets/facebook.svg" class="w-full h-auto"></img>
                </a>
                <a href="https://twitter.com/ClassicDecoder" class="w-7 h-7 transition-all duration-300 ease-in-out hover:-translate-y-1 hover:shadow-lg hover:shadow-[#D5B002]/20 rounded-full" target="_blank">
                    <img src="assets/twitter.svg" class="w-full h-auto"></img>
                </a>
                <a href="mailto:support@classicdecoder.com" class="w-7 h-7 transition-all duration-300 ease-in-out hover:-translate-y-1 hover:shadow-lg hover:shadow-[#D5B002]/20 rounded-full" target="_blank">
                    <img src="assets/gmail.svg" class="w-full h-auto"></img>
                </a>
                <a href="https://www.linkedin.com/company/classicdecoder" class="w-7 h-7 transition-all duration-300 ease-in-out hover:-translate-y-1 hover:shadow-lg hover:shadow-[#D5B002]/20 rounded-full" target="_blank">
                    <img src="assets/linkedin.svg" class="w-full h-auto"></img>
                </a>
                <a href="https://www.pinterest.com/classicdecoder/" class="w-7 h-7 transition-all duration-300 ease-in-out hover:-translate-y-1 hover:shadow-lg hover:shadow-[#D5B002]/20 rounded-full" target="_blank">
                    <img src="assets/pinterest.svg" class="w-full h-auto"></img>
                </a>
                <a href="https://secure.livechatinc.com/licence/10186117/v2/open_chat.cgi?groups=0" class="w-7 h-7 transition-all duration-300 ease-in-out hover:-translate-y-1 hover:shadow-lg hover:shadow-[#D5B002]/20 rounded-full" target="_blank">
                    <img src="assets/livechat.svg" class="w-full h-auto"></img>
                </a>
            </div>

            <button class="w-full bg-[#2B2B2B] text-white py-3 px-4 rounded-md">Download Report</button>
        </div>
        <!-- Header -->
        <div class="text-white py-4 md:p-4">
            <div class="flex justify-between items-center gap-4">
                <div class="flex flex-col text-center md:flex-row md:text-left bg-gray-900 p-3 md:rounded-md items-center gap-4 w-full">
                    <img src="assets/logo.png" class="w-20 h-20 bg-white object-cover rounded-md p-1"></img>
                    <div>
                        <h1 class="text-2xl lg:text-3xl font-bold">1972 Oldsmobile Cutlass V8 Series 33287</h1>
                        <p class="text-lg lg:text-2xl mt-2">VIN: 3G6PH2R106352</p>
                    </div>
                </div>
                <div class="hidden md:flex w-72 gap-2 flex-col justify-center text-center text-black">
                    <p class="text-lg font-medium">Scan to open report:</p>
                    <img src="assets/barcode.png" class="w-16 h-16 object-cover m-auto"></img> <!-- QR Code placeholder -->
                </div>
            </div>
        </div>

        <!-- Specifications Content -->
        <section section-name="Standard Specifications" id="specificationsSection" class="p-6 pt-1">
            <h2 class="text-2xl font-bold mb-6 text-center md:text-left">Standard Specifications</h2>
            <div class="columns-1 sm:columns-2 gap-8 border p-3 rounded-md" id="specificationsContent"></div>
        </section>
        <script>
            // Specifications Data
            const specifications = {
                'Body': {
                    'Body Maker': 'Fisher',
                    'No. Doors': '4',
                    'Model Number': '33669',
                    'Weight': '3,445lbs'
                },
                'Dimension': {
                    'Wheelbase': '115 inches',
                    'Length': '207.6 inches',
                    'Width': '76.3 inches',
                    'Height': '53.5 inches',
                    'Front Tread': '59.7 inches',
                    'Rear Tread': '59.2 inches'
                },
                'Engine': {
                    'Type': 'Rocket V8, valve-in-head',
                    'Displacement': '350 cu. in.',
                    'Cylinders': '8',
                    'Bore x Stroke': '4.057 & 3.385 inches',
                    'Compression Ratio Std': '8.5 to 1',
                    'Main Bearings': '5',
                    'Engine Numbers': 'OA',
                    'Lubrication': 'Pressure to all bearings excluding wrist pin'
                },
                'Carburetor': {
                    'Body Maker': 'Fisher',
                    'No. Doors': '4'
                },
                'Transmission': {
                    'Type': 'Fully synchronous 3-speed manual',
                    'Drive': 'Rear wheel drive',
                    'No. of Gears': '3'
                },
                'Brakes': {
                    'Service': 'Hydraulic, self-adjusting drums',
                    'Front Size': '9.5 inches',
                    'Rear Size': '9.5 inches',
                    'Emergency': 'Rear service brakes'
                },
                'Wheels, Rims & Tires': {
                    'Tire Size': 'F78 x 14',
                    'Spare Location': 'Trunk'
                },
                'Capacities': {
                    'Fuel': '20 Gallons',
                    'Oil': '4 Quarts',
                    'Transmission': '3.5 Pints',
                    'Cooling System': 'Water pump, 16 Quarts'
                },
                'Other System Specifications': {
                    'Exhaust System': 'Single',
                    'Battery': '12-volt storage battery',
                    'Radiator': 'Tubular and fin',
                    'Fuel Type': 'Regular'
                }
            };

            // Generate Specifications Content
            function generateSpecifications() {
                const specificationsSection = document.getElementById('specificationsSection');
                const specificationsContent = document.getElementById('specificationsContent');

                if (Object.keys(specifications).length === 0) {
                    specificationsSection.style.display = 'none';
                    return;
                }

                specificationsSection.style.display = 'block';
                specificationsContent.innerHTML = Object.entries(specifications).map(([section, specs]) => `
                    <div class="mb-5 break-inside-avoid flex flex-wrap">
                        <h3 class="font-bold w-full border-b border-black mb-2 pb-1">${section}</h3>
                        ${Object.entries(specs).map(([key, value]) => value ? `
                            <div class="flex gap-2 sm:gap-0 sm:flex-col w-full sm:w-1/2 justify-between p-0.5">
                                <span class="spec-key w-1/2 sm:w-full text-gray-600 text-sm sm:text-base">${key}:</span>
                                <span class="spec-value w-1/2 sm:w-full text-sm sm:text-base">${value}</span>
                            </div>
                        ` : '').join('')}
                    </div>
                `).join('');
            }
            // Call the function to generate specifications
            generateSpecifications();
        </script>

        <!-- Vehicle Highlights -->
        <section section-name="Vehicle Summary" id="vehicleHighlightsSection" class="p-6 hidden">
            <div class="flex flex-col md:flex-row justify-center md:justify-between items-center mb-4">
                <h2 class="text-2xl font-bold">Vehicle Summary</h2>
                <span class="text-lg font-semibold" id="recordCount"></span>
            </div>
            <p class="text-gray-700 mb-6 text-center md:text-left">This section shows a summary of all major events and significant records of this vehicle.</p>
            
            <div class="grid grid-cols-2 md:grid-cols-3 lg:grid-cols-5 gap-2 border p-3 rounded-md" id="highlightsGrid"></div>
        </section>
    
        <script>
            // Raw data from API/Database. can be empty to not show the section
            const vehicleData = {
                titleBrandCount: 1,
                odometerCount: 0,
                accidentCount: 0,
                damageCount: 2,
                eventCount: 0,
                serviceCount: 0,
                auctionCount: 1,
                lienCount: 0,
                theftCount: 0,
                recallCount: 0
            };
    
            // Configuration for highlight cards
            const highlightConfig = {
                titleBrand: {
                    id: 'titleBrand',
                    icon: 'file-text',
                    title: 'Title Brand',
                    getStatus: (count) => count > 0 ? 'issue' : 'clean',
                    getMessage: (count) => count > 0 
                        ? `The vehicle has ${count > 1 ? count + ' branded titles' : 'a branded title'}`
                        : 'The vehicle has no branded title'
                },
                odometer: {
                    id: 'odometer',
                    icon: 'gauge',
                    title: 'Odometer',
                    getStatus: (count) => count > 0 ? 'issue' : 'clean',
                    getMessage: (count) => count > 0
                        ? 'The vehicle has mileage discrepancy'
                        : 'The vehicle has no mileage discrepancy'
                },
                accident: {
                    id: 'accident',
                    icon: 'alert-triangle',
                    title: 'Accident',
                    getStatus: (count) => count > 0 ? 'issue' : 'clean',
                    getMessage: (count) => count > 0
                        ? `${count} accident record${count > 1 ? 's' : ''} found`
                        : 'No accident record(s) found'
                },
                damage: {
                    id: 'damage',
                    icon: 'hammer',
                    title: 'Damage',
                    getStatus: (count) => count > 0 ? 'issue' : 'clean',
                    getMessage: (count) => count > 0
                        ? `${count} Record${count > 1 ? 's' : ''} of damage ${count > 1 ? 'are' : 'is'} found for the vehicle`
                        : 'No damage record found'
                },
                event: {
                    id: 'event',
                    icon: 'calendar',
                    title: 'Event',
                    getStatus: (count) => count > 0 ? 'warning' : 'clean',
                    getMessage: (count) => count > 0
                        ? `${count} event${count > 1 ? 's' : ''} reported`
                        : 'The vehicle has no specific event reported'
                },
                service: {
                    id: 'service',
                    icon: 'wrench',
                    title: 'Service & Repair',
                    getStatus: (count) => count > 0 ? 'warning' : 'clean',
                    getMessage: (count) => count > 0
                        ? `${count} service & repair record${count > 1 ? 's' : ''} found`
                        : 'The vehicle has no service & repair record(s)'
                },
                auction: {
                    id: 'auction',
                    icon: 'gavel',
                    title: 'Auction',
                    getStatus: (count) => count > 0 ? 'issue' : 'clean',
                    getMessage: (count) => count > 0
                        ? `The vehicle has ${count} auction record${count > 1 ? 's' : ''}`
                        : 'No auction records found'
                },
                lien: {
                    id: 'lien',
                    icon: 'banknote',
                    title: 'Lien/Loan',
                    getStatus: (count) => count > 0 ? 'warning' : 'clean',
                    getMessage: (count) => count > 0
                        ? `${count} lien/loan record${count > 1 ? 's' : ''} found`
                        : 'The vehicle has no lien or loan record(s)'
                },
                theft: {
                    id: 'theft',
                    icon: 'key',
                    title: 'Theft',
                    getStatus: (count) => count > 0 ? 'issue' : 'clean',
                    getMessage: (count) => count > 0
                        ? `${count} theft record${count > 1 ? 's' : ''} found`
                        : 'The vehicle has no stolen or theft record(s)'
                },
                recall: {
                    id: 'recall',
                    icon: 'alert-triangle',
                    title: 'Recall',
                    getStatus: (count) => count > 0 ? 'issue' : 'clean',
                    getMessage: (count) => count > 0
                        ? `${count} open recall${count > 1 ? 's' : ''}`
                        : 'The vehicle has no open recalls record'
                }
            };
    
            // Style configurations based on status
            const statusStyles = {
                clean: {
                    card: 'bg-white',
                    text: 'text-gray-900',
                    icon: 'text-gray-900',
                    overlay: 'grayyedBG-1' // Transparent overlay for clean status
                },
                issue: {
                    card: 'bg-red-50',
                    text: 'text-red-600',
                    icon: 'text-red-600',
                    overlay: 'grayyedBG-1-red' // Semi-transparent red overlay for issue status
                },
                warning: {
                    card: 'bg-orange-50',
                    text: 'text-orange-600',
                    icon: 'text-orange-600',
                    overlay: 'grayyedBG-1-red' // Semi-transparent orange overlay for warning status
                }
            };
    
            // Function to generate highlight cards
            function generateHighlightCards() {
                const section = document.getElementById('vehicleHighlightsSection');
                const grid = document.getElementById('highlightsGrid');
                const recordCount = document.getElementById('recordCount');
                
                // Check if vehicleData is available
                if (!vehicleData || Object.keys(vehicleData).length === 0) {
                    section.classList.add('hidden');
                    return;
                }
    
                section.classList.remove('hidden');
                
                // Count total records with issues
                const totalIssues = Object.values(vehicleData)
                    .reduce((sum, count) => sum + (count > 0 ? 1 : 0), 0);
                
                recordCount.textContent = `${totalIssues} record(s) found`;
    
                // Generate cards
                grid.innerHTML = Object.entries(highlightConfig)
                    .map(([key, config]) => {
                        const count = vehicleData[`${key}Count`];
                        const status = config.getStatus(count);
                        const styles = statusStyles[status];
                        
                        return `
                            <div class="relative flex border border-black rounded-lg overflow-hidden hover-shadow-orange">
                                <div class="relative z-10 p-4 flex flex-col items-center text-center w-full ${styles.overlay}">
                                    <i data-lucide="${config.icon}" class="w-6 h-6 mb-2 ${styles.icon}"></i>
                                    <h3 class="font-bold ${styles.text}">${config.title}</h3>
                                    <div class="w-full border-t my-2" style="border-color: currentColor; opacity: 1;"></div>
                                    <p class="text-sm ${styles.text}">${config.getMessage(count)}</p>
                                </div>
                            </div>
                        `;
                    })
                    .join('');
    
                // Initialize Lucide icons
                lucide.createIcons();
            }
    
            // Initialize the highlights section
            generateHighlightCards();
        </script>

        <!-- Ownership Usage -->
        <section section-name="Ownership Usage" id="ownershipUsageSection" class="p-6 hidden">
            <div class="flex flex-col md:flex-row justify-center md:justify-between items-center mb-4">
                <h2 class="text-2xl font-bold">Ownership usage</h2>
                <span class="text-lg font-semibold" id="usageCount"></span>
            </div>
            <p class="text-gray-700 mb-6 text-center md:text-left">Vehicle has personal usage record</p>
            
            <div class="grid grid-cols-2 md:grid-cols-4 lg:grid-cols-8 gap-4" id="usageTimeline"></div>
        </section>
        
        <script>
            // Usage data configuration 1 or 0 for count
            const usageData = {
                types: [
                    { id: 'personal', label: 'Personal', count: 1 },
                    { id: 'lease', label: 'Lease', count: 0 },
                    { id: 'rental', label: 'Rental', count: 0 },
                    { id: 'taxi', label: 'Taxi', count: 0 },
                    { id: 'police', label: 'Police', count: 0 },
                    { id: 'fleet', label: 'Fleet', count: 0 },
                    { id: 'commercial', label: 'Commercial', count: 0 },
                    { id: 'government', label: 'Government', count: 0 }
                ]
            };
        
            function generateUsageTimeline() {
                const section = document.getElementById('ownershipUsageSection');
                const timeline = document.getElementById('usageTimeline');
                const usageCountElement = document.getElementById('usageCount');
        
                // Hide section if no data
                if (!usageData || usageData.types.length === 0) {
                    section.classList.add('hidden');
                    return;
                }
        
                // Show section and update count
                section.classList.remove('hidden');
                const totalUsages = usageData.types.reduce((sum, type) => sum + type.count, 0);
                usageCountElement.textContent = `${totalUsages} usage(s) found`;
        
                // Generate timeline items
                timeline.innerHTML = usageData.types.map((usage, index) => {
                    const hasUsage = usage.count > 0;
                    
                    return `
                        <div class="flex flex-col items-center gap-2">
                            <div class="relative flex items-center justify-center w-full">
                                <!-- Status Icon -->
                                <div class="w-6 h-6 rounded-full ${hasUsage ? 'bg-[#F51919]' : 'bg-[#09A246]'} flex items-center justify-center">
                                    <i data-lucide="${hasUsage ? 'check' : 'x'}" 
                                       class="w-4 h-4 ${hasUsage ? 'text-white' : 'text-white'}"></i>
                                </div>
                                <!-- Connector Line -->
                                ${index < usageData.types.length - 1 ? `
                                    <div class="hidden lg:block absolute w-[110%] h-[2px] bg-black left-1/2 top-1/2 -z-10"></div>
                                ` : ''}
                            </div>
                            <span class="text-sm text-center">${usage.label}</span>
                        </div>
                    `;
                }).join('');
        
                // Initialize Lucide icons
                lucide.createIcons();
            }
        
            // Initialize timeline
            generateUsageTimeline();
        </script>

        <!-- Ownership History -->
        <section section-name="Ownership History" id="ownershipHistorySection" class="p-6 hidden">
            <div class="flex flex-col md:flex-row justify-center md:justify-between items-center mb-4">
                <h2 class="text-2xl font-bold">Ownership History</h2>
                <span class="text-lg font-semibold" id="ownerCount"></span>
            </div>
            <p class="text-gray-700 mb-6 text-center md:text-left">This section summarizes the ownership history of this vehicle</p>
            
            <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-5 gap-2 print:gap-4 print:grid-cols-2" id="ownershipGrid"></div>
        </section>
        
        <script>
            // Ownership data
            const ownershipData = {
                owners: [
                    {
                        id: 1,
                        title: 'Owner 1',
                        purchaseDate: '1996',
                        location: 'FL',
                        ownedFrom: '02/1996',
                        ownedTo: '08/2005',
                        duration: '9 year(s) 6 month(s)'
                    },
                    {
                        id: 2,
                        title: 'Owner 2',
                        purchaseDate: '2005',
                        location: 'FL',
                        ownedFrom: '08/2005',
                        ownedTo: '09/2019',
                        duration: '14 year(s) 1 month'
                    },
                    {
                        id: 3,
                        title: 'Current Owner',
                        purchaseDate: '2019',
                        location: 'FL',
                        ownedFrom: '09/2019',
                        ownedTo: 'Present',
                        duration: '5 year(s) 2 month(s)'
                    }
                ]
            };
        
            function generateOwnershipHistory() {
                const section = document.getElementById('ownershipHistorySection');
                const grid = document.getElementById('ownershipGrid');
                const ownerCount = document.getElementById('ownerCount');
        
                // Hide section if no data
                if (!ownershipData || !ownershipData.owners || ownershipData.owners.length === 0) {
                    section.classList.add('hidden');
                    return;
                }
        
                // Show section and update count
                section.classList.remove('hidden');
                ownerCount.textContent = `${ownershipData.owners.length} record(s) found`;
        
                // Generate owner cards
                grid.innerHTML = ownershipData.owners.map(owner => `
                    <div class="border border-black rounded-lg p-3 hover-shadow-orange" style="background-color: #FEF6D5;">
                        <div class="flex items-center gap-2 mb-2">
                            <i data-lucide="user" class="w-5 h-5"></i>
                            <span class="font-bold">${owner.title}</span>
                        </div>
        
                        <div class="space-y-2 text-sm pt-1 columns-2 sm:columns-1">
                            <div class="break-inside-avoid">
                                <div class="font-semibold">Purchased On:</div>
                                <div>${owner.purchaseDate}</div>
                            </div>
        
                            <div class="break-inside-avoid">
                                <div class="font-semibold">Located In:</div>
                                <div>${owner.location}</div>
                            </div>
        
                            <div class="break-inside-avoid">
                                <div class="font-semibold">Owned From:</div>
                                <div>${owner.ownedFrom} - ${owner.ownedTo}</div>
                            </div>
        
                            <div class="break-inside-avoid">
                                <div class="font-semibold">Duration of Ownership</div>
                                <div>${owner.duration}</div>
                            </div>
                        </div>
                    </div>
                `).join('');
        
                // Initialize Lucide icons
                lucide.createIcons();
            }
        
            // Initialize ownership history
            generateOwnershipHistory();
        </script>
        <!-- Banner Form -->
        <section class="p-6 no-print">
            <div class="max-w-6xl bg-[#0a1a1f] p-8 rounded-lg text-white mx-auto">
                <form id="buildsheetForm" class="grid md:grid-cols-2 gap-8 items-start">
                    <!-- Left Column -->
                    <div class="space-y-3 md:order-1">
                        <h2 class="text-lg md:text-xl font-semibold">
                            Learn more about any classic vehicle build sheets Get <span class="text-[#ffd700] text-2xl font-bold">20% Off</span> on your next purchase!
                        </h2>
                        
                        <div class="text-base">Our build sheet includes:</div>
                        
                        <div class="grid md:grid-cols-2 gap-x-8 gap-y-3">
                            <!-- Left Features -->
                            <div class="space-y-3">
                                <div class="flex items-center gap-2">
                                    <i data-lucide="check-circle-2" class="w-5 h-5 text-green-500"></i>
                                    <span>Engine & Transmission Specs</span>
                                </div>
                                <div class="flex items-center gap-2">
                                    <i data-lucide="check-circle-2" class="w-5 h-5 text-green-500"></i>
                                    <span>Standard Equipment</span>
                                </div>
                                <div class="flex items-center gap-2">
                                    <i data-lucide="check-circle-2" class="w-5 h-5 text-green-500"></i>
                                    <span>Original Base Price</span>
                                </div>
                                <div class="flex items-center gap-2">
                                    <i data-lucide="check-circle-2" class="w-5 h-5 text-green-500"></i>
                                    <span>Interior/Exterior Color</span>
                                </div>
                            </div>
                            
                            <!-- Right Features -->
                            <div class="space-y-3">
                                <div class="flex items-center gap-2">
                                    <i data-lucide="check-circle-2" class="w-5 h-5 text-green-500"></i>
                                    <span>Dimensions</span>
                                </div>
                                <div class="flex items-center gap-2">
                                    <i data-lucide="check-circle-2" class="w-5 h-5 text-green-500"></i>
                                    <span>Wheels, Rims & Tires</span>
                                </div>
                                <div class="flex items-center gap-2">
                                    <i data-lucide="check-circle-2" class="w-5 h-5 text-green-500"></i>
                                    <span>Production Numbers</span>
                                </div>
                                <div class="flex items-center gap-2">
                                    <i data-lucide="check-circle-2" class="w-5 h-5 text-green-500"></i>
                                    <span>Paint types & code</span>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Right Column - Form -->
                    <div class="space-y-4 md:order-2">
                        <input 
                            type="text" 
                            id="buildsheetForm_vin"
                            placeholder="Your 5-13 digit VIN" 
                            class="w-full p-3 rounded bg-[#1a2a30] border border-gray-700 focus:outline-none focus:border-[#ffd700]"
                        >
                        <input 
                            type="email" 
                            id="buildsheetForm_email"
                            placeholder="Your email address" 
                            class="w-full p-3 rounded bg-[#1a2a30] border border-gray-700 focus:outline-none focus:border-[#ffd700]"
                        >
                        <input 
                            type="tel" 
                            id="buildsheetForm_phone"
                            placeholder="Your phone number" 
                            class="w-full p-3 rounded bg-[#1a2a30] border border-gray-700 focus:outline-none focus:border-[#ffd700]"
                        >
                        <div id="buildsheetForm_errorMessage" class="text-red-500"></div>
                        <div class="flex flex-wrap items-center gap-4 pt-2">
                            <button id="buildsheetForm_submit" type="submit" class="px-2 py-2 sm:px-4 sm:py-3 bg-[#ffd700] text-black font-semibold rounded hover:bg-[#e6c200] transition-colors">
                                Get Your Build Sheet
                            </button>
                            <button type="button" class="px-2 py-2 sm:px-6 sm:py-3 text-white font-semibold rounded flex items-center gap-2 hover:bg-[#1a2a30] transition-colors">
                                View Sample
                                <i data-lucide="arrow-right" class="w-4 h-4"></i>
                            </button>
                        </div>
                    </div>
                </form>
            </div>
        </section>
        <script>
            document.addEventListener('DOMContentLoaded', function() {
                const form = document.getElementById('buildsheetForm');
                const submitButton = document.getElementById('buildsheetForm_submit');
                const errorMessageElement = document.getElementById('buildsheetForm_errorMessage');

                submitButton.addEventListener('click', function(e) {
                    e.preventDefault();
                    bannerForm(
                        'sticker',
                        'buildsheetForm',
                        document.getElementById('buildsheetForm_vin').value,
                        document.getElementById('buildsheetForm_email').value,
                        document.getElementById('buildsheetForm_phone').value,
                        errorMessageElement
                    );
                });
            });
        </script>


        <!-- Title History -->
        <section section-name="Title History" id="titleHistorySection" class="p-6 hidden">
            <div class="flex flex-col md:flex-row justify-center md:justify-between items-center mb-4">
                <h2 class="text-2xl font-bold">Title History</h2>
                <span class="text-lg font-semibold" id="titleCount"></span>
            </div>
            <p class="text-gray-700 mb-6 text-center md:text-left">This section contains the title history records of the vehicle</p>
            
            <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-5 gap-2 print:gap-4 print:grid print:grid-cols-2" id="titleHistoryGrid"></div>
        </section>

        <script>
            // Title history data
            const titleHistoryData = {
                records: [
                    {
                        status: "Historical",
                        date: "01-28-2005",
                        stateOfTitle: "California",
                        mileage: "Unknown"
                    },
                    {
                        status: "Historical",
                        date: "03-25-2005",
                        stateOfTitle: "Florida",
                        mileage: "Exempt"
                    },
                    {
                        status: "Current",
                        date: "01-11-2019",
                        stateOfTitle: "Connecticut",
                        mileage: "49906 mi"
                    }
                ]
            };

            function generateTitleHistory() {
                const section = document.getElementById('titleHistorySection');
                const grid = document.getElementById('titleHistoryGrid');
                const titleCount = document.getElementById('titleCount');

                // Hide section if no data
                if (!titleHistoryData || !titleHistoryData.records || titleHistoryData.records.length === 0) {
                    section.classList.remove('hidden');
                    grid.classList.remove('grid');
                    const noRecordsMessage = createNoRecordsMessage('Title History');
                    grid.innerHTML = '';
                    grid.appendChild(noRecordsMessage);
                    return;
                }

                // Show section and update count
                section.classList.remove('hidden');
                titleCount.textContent = `${titleHistoryData.records.length} record(s) found`;

                // Generate title history cards
                grid.innerHTML = titleHistoryData.records.map(record => `
                    <div class="border border-black rounded-lg p-3 hover-shadow-orange" style="background-color: #FEF6D5;">
                        <div class="flex items-center gap-2 mb-2">
                            <i data-lucide="file-text" class="w-5 h-5"></i>
                            <span class="font-bold">${record.status}</span>
                        </div>

                        <div class="space-y-2 text-sm pt-1">
                            <div>
                                <div class="font-semibold">Date:</div>
                                <div>${record.date}</div>
                            </div>

                            <div>
                                <div class="font-semibold">State of Title:</div>
                                <div>${record.stateOfTitle}</div>
                            </div>

                            <div>
                                <div class="font-semibold">Mileage:</div>
                                <div>${record.mileage}</div>
                            </div>
                        </div>
                    </div>
                `).join('');

                // Initialize Lucide icons
                lucide.createIcons();
            }

            // Initialize title history
            generateTitleHistory();
        </script>

        <!-- Accident Records -->
        <section section-name="Accident Records (New)" id="accidentRecordsSectionNew" class="p-6 hidden">
            <div class="flex flex-col md:flex-row justify-center md:justify-between items-center mb-4">
                <h2 class="text-2xl font-bold">Accident Records (New)</h2>
                <span class="text-lg font-semibold" id="accidentRecordCountNew"></span>
            </div>
            <p class="text-gray-700 mb-6 text-center md:text-left">This section contains the accident records of the vehicle</p>
            
            <div class="space-y-2 print:grid grid-cols-2 print:space-y-0 print:gap-4" id="accidentGridNew"></div>
        </section>

        <script>
            // Accident records data
            const accidentDataNew = {
                records: [
                    {
                        reportDate: '07-28-2016',
                        location: 'U56 HWY & LARNED CITY LIMIT PT',
                        accidentType: 'COLLISION W MOTOR VEH-TRANSPOR',
                        impactPoint: 'PASSENGER FRNT QRTER',
                        source: {
                            name: 'Kansas Dept of Transportation,Topeka,KS,66603',
                            contact: '785-296-3566, www.ksdot.org'
                        }
                    },
                    {
                        reportDate: '03-15-2016',
                        location: 'INTERSTATE 70 & EXIT 159',
                        accidentType: 'REAR END COLLISION',
                        impactPoint: 'REAR CENTER',
                        source: {
                            name: 'Kansas Dept of Transportation,Topeka,KS,66603',
                            contact: '785-296-3566, www.ksdot.org'
                        }
                    }
                ]
            };

            function generateAccidentRecordsNew(accidentDataNew) {
                const section = document.getElementById('accidentRecordsSectionNew');
                const grid = document.getElementById('accidentGridNew');
                const recordCount = document.getElementById('accidentRecordCountNew');

                // Check if data exists
                const hasData = accidentDataNew && 
                            accidentDataNew.records && 
                            accidentDataNew.records.length > 0;

                if (!hasData) {
                    section.classList.remove('hidden');
                    grid.innerHTML = '';
                    const noRecordsMessage = createNoRecordsMessage('Accident');
                    grid.appendChild(noRecordsMessage);
                    return;
                }

                // Show section and update count
                section.classList.remove('hidden');
                recordCount.textContent = `${accidentDataNew.records.length} record(s) found`;

                // Generate accident record cards
                grid.innerHTML = accidentDataNew.records.map(record => `
                    <div class="border border-black rounded-lg overflow-hidden hover-shadow-orange grayyedBG-1-red">
                        <div class="p-3 space-y-4">
                            <div class="grid md:grid-cols-2 gap-4">
                                <!-- Reported on -->
                                <div class="flex items-start gap-2">
                                    <i data-lucide="bell-ring" class="w-5 h-5 mt-1 text-red-600"></i>
                                    <div>
                                        <div class="text-red-600 font-semibold">Reported on</div>
                                        <div class="text-red-600 text-sm">${record.reportDate}</div>
                                    </div>
                                </div>

                                <!-- Located at -->
                                <div class="flex items-start gap-2">
                                    <i data-lucide="map-pin" class="w-5 h-5 mt-1 text-red-600"></i>
                                    <div>
                                        <div class="text-red-600 font-semibold">Located at</div>
                                        <div class="text-red-600 text-sm">${record.location}</div>
                                    </div>
                                </div>

                                <!-- Accident type -->
                                <div class="flex items-start gap-2">
                                    <i data-lucide="ban" class="w-5 h-5 mt-1 text-red-600"></i>
                                    <div>
                                        <div class="text-red-600 font-semibold">Accident type</div>
                                        <div class="text-red-600 text-sm">${record.accidentType}</div>
                                    </div>
                                </div>

                                <!-- Impact point -->
                                <div class="flex items-start gap-2">
                                    <i data-lucide="target" class="w-5 h-5 mt-1 text-red-600"></i>
                                    <div>
                                        <div class="text-red-600 font-semibold">Impact point</div>
                                        <div class="text-red-600 text-sm">${record.impactPoint}</div>
                                    </div>
                                </div>
                            </div>

                            <!-- Source -->
                            <div class="flex items-start gap-2">
                                <i data-lucide="building" class="w-5 h-5 mt-1 text-red-600"></i>
                                <div>
                                    <div class="text-red-600 font-semibold">Source</div>
                                    <div class="text-red-600 text-sm">${record.source.name}</div>
                                    <div class="text-red-600 text-sm">${record.source.contact}</div>
                                </div>
                            </div>
                        </div>
                    </div>
                `).join('');

                // Initialize Lucide icons
                lucide.createIcons();
            }

            // Initialize accident records
            generateAccidentRecordsNew(accidentDataNew);
        </script>

        <!-- Theft Records New -->
        <section section-name="Theft Records (New)" id="theftRecordsSectionNew" class="p-6 hidden">
            <div class="flex flex-col md:flex-row justify-center md:justify-between items-center mb-4">
                <h2 class="text-2xl font-bold">Theft Records (New)</h2>
                <span class="text-lg font-semibold" id="theftRecordCountNew"></span>
            </div>
            <p class="text-gray-700 mb-6 text-center md:text-left">This section contains details of theft(s) or stolen records</p>
            
            <!-- Table for desktop -->
            <div class="hidden md:block overflow-x-auto">
                <table id="theftTableNew" class="w-full">
                    <thead class="bg-[#2B2B2B] text-white">
                        <tr>
                            <th class="p-4 text-left border border-white">Reported on:</th>
                            <th class="p-4 text-left border border-white">Record Type</th>
                            <th class="p-4 text-left border border-white">Reported State</th>
                            <th class="p-4 text-left border border-white">Theft Status</th>
                            <th class="p-4 text-left border border-white">VIN</th>
                        </tr>
                    </thead>
                    <tbody id="theftTableBodyNew"></tbody>
                </table>
            </div>

            <!-- Cards for mobile -->
            <div class="md:hidden space-y-4 print:grid grid-cols-2 print:space-y-0 gap-4" id="theftCardGridNew"></div>
        </section>

        <script>
            // Theft records data new format
            const theftDataNew = {
                records: [
                    {
                        reportedOn: '2009-05-03',
                        recordType: 'Theft',
                        reportedState: 'California',
                        theftStatus: 'Inactive',
                        vin: 'B50LHA'
                    },
                    {
                        reportedOn: '2010-08-15',
                        recordType: 'Theft',
                        reportedState: 'Texas',
                        theftStatus: 'Active',
                        vin: 'C72KMB'
                    },
                    {
                        reportedOn: '2011-03-22',
                        recordType: 'Theft',
                        reportedState: 'Florida',
                        theftStatus: 'Recovered',
                        vin: 'D94NPC'
                    }
                ]
            };

            function generateTheftRecordsNew() {
                const section = document.getElementById('theftRecordsSectionNew');
                const theftTable = document.getElementById('theftTableNew');
                const tableBody = document.getElementById('theftTableBodyNew');
                const cardGrid = document.getElementById('theftCardGridNew');
                const recordCount = document.getElementById('theftRecordCountNew');

                // Check if data exists
                const hasData = theftDataNew && 
                            theftDataNew.records && 
                            theftDataNew.records.length > 0;

                if (!hasData) {
                    section.classList.remove('hidden');
                    theftTable.classList.add('hidden');
                    const noRecordsMessage = createNoRecordsMessage('Theft');
                    section.appendChild(noRecordsMessage);
                    return;
                }

                // Show section and update count
                section.classList.remove('hidden');
                recordCount.textContent = `${theftDataNew.records.length} record(s) found`;

                // Generate table rows for desktop
                tableBody.innerHTML = theftDataNew.records.map(record => `
                    <tr class="border-b hover:bg-gray-50">
                        <td class="p-4">${record.reportedOn}</td>
                        <td class="p-4">${record.recordType}</td>
                        <td class="p-4">${record.reportedState}</td>
                        <td class="p-4">${record.theftStatus}</td>
                        <td class="p-4">${record.vin}</td>
                    </tr>
                `).join('');

                // Generate cards for mobile
                cardGrid.innerHTML = theftDataNew.records.map(record => `
                    <div class="border rounded-lg p-3 space-y-3">
                        <div>
                            <div class="font-semibold text-gray-600">Reported on:</div>
                            <div>${record.reportedOn}</div>
                        </div>
                        <div>
                            <div class="font-semibold text-gray-600">Record Type</div>
                            <div>${record.recordType}</div>
                        </div>
                        <div>
                            <div class="font-semibold text-gray-600">Reported State</div>
                            <div>${record.reportedState}</div>
                        </div>
                        <div>
                            <div class="font-semibold text-gray-600">Theft Status</div>
                            <div>${record.theftStatus}</div>
                        </div>
                        <div>
                            <div class="font-semibold text-gray-600">VIN</div>
                            <div>${record.vin}</div>
                        </div>
                    </div>
                `).join('');
            }

            // Initialize new theft records
            generateTheftRecordsNew();
        </script>

        <!-- Lien/ Impound/ Export Records -->
        <section section-name="Lien/ Impound/ Export" id="LienImpoundExportRecordsSection" class="p-6 hidden">
            <div class="flex flex-col md:flex-row justify-center md:justify-between items-center mb-4">
                <h2 class="text-2xl font-bold text-center md:text-left">Lien/ Impound/ Export Records</h2>
                <span class="text-lg font-semibold" id="LienImpoundExportRecordCount"></span>
            </div>
            <p class="text-gray-700 mb-6 text-center md:text-left">This section contains lien, impound, and export records of the vehicle.</p>
            
            <!-- Table for desktop -->
            <div class="hidden md:block overflow-x-auto">
                <table id="LienImpoundExportTableContent" class="w-full">
                    <thead class="bg-[#2B2B2B] text-white">
                        <tr>
                            <th class="p-4 text-center">Date</th>
                            <th class="p-4 text-center">Record Type</th>
                            <th class="p-4 text-center">Agency</th>
                        </tr>
                    </thead>
                    <tbody id="LienImpoundExportTableBody"></tbody>
                </table>
            </div>

            <!-- Cards for mobile -->
            <div class="md:hidden space-y-4 print:grid print:grid-cols-2 print:space-y-0 print:gap-4" id="LienImpoundExportCardGrid"></div>
        </section>

        <script>
            // Lien/ Impound/ Export records data
            const LienImpoundExportData = {
                records: [
                    {
                        date: '05/12/2022',
                        type: 'Salvage',
                        agency: 'State DMV Records'
                    },
                    {
                        date: '11/03/2021',
                        type: 'Insurance Claim',
                        agency: 'Insurance Database'
                    },
                    {
                        date: '07/18/2020',
                        type: 'Junk',
                        agency: 'County Records'
                    }
                ]
            };

            function generateLienImpoundExportRecords() {
                const section = document.getElementById('LienImpoundExportRecordsSection');
                const tableBody = document.getElementById('LienImpoundExportTableBody');
                const LienImpoundExportTableContent = document.getElementById('LienImpoundExportTableContent');
                const cardGrid = document.getElementById('LienImpoundExportCardGrid');
                const recordCount = document.getElementById('LienImpoundExportRecordCount');

                // Check if data exists
                const hasData = LienImpoundExportData !== null && 
                            LienImpoundExportData !== undefined && 
                            LienImpoundExportData.records && 
                            LienImpoundExportData.records.length > 0;

                if (!hasData) {
                    section.classList.remove('hidden');
                    LienImpoundExportTableContent.classList.add('hidden');
                    const noRecordsMessage = createNoRecordsMessage('Lien/ Impound/ Export Records');
                    section.appendChild(noRecordsMessage);
                    return;
                }

                // Show section and update count
                section.classList.remove('hidden');
                recordCount.textContent = `${LienImpoundExportData.records.length} record(s) found`;

                // Generate table rows for desktop
                tableBody.innerHTML = LienImpoundExportData.records.map(record => `
                    <tr class="border-b hover:bg-gray-50 text-center">
                        <td class="p-4 text-center">${record.date}</td>
                        <td class="p-4 text-center">${record.type}</td>
                        <td class="p-4 text-center">${record.agency}</td>
                    </tr>
                `).join('');

                // Generate cards for mobile
                cardGrid.innerHTML = LienImpoundExportData.records.map(record => `
                    <div class="border rounded-lg p-3 space-y-3">
                        <div>
                            <div class="font-semibold text-gray-600 text-sm">Event Date</div>
                            <div>${record.date}</div>
                        </div>
                        <div>
                            <div class="font-semibold text-gray-600 text-sm">Type</div>
                            <div>${record.type}</div>
                        </div>
                        <div>
                            <div class="font-semibold text-gray-600 text-sm">Agency</div>
                            <div>${record.agency}</div>
                        </div>
                    </div>
                `).join('');
            }

            // Initialize Lien/ Impound/ Export records
            generateLienImpoundExportRecords();
        </script>

        <!-- Junk/Salvage/Insurance Records -->
        <section section-name="Junk Salvage Records" id="junkSalvageRecordsSection" class="p-6 hidden">
            <div class="flex flex-col md:flex-row justify-center md:justify-between items-center mb-4">
                <h2 class="text-2xl font-bold text-center md:text-left">Junk/Salvage/Insurance Records</h2>
                <span class="text-lg font-semibold" id="junkSalvageRecordCount"></span>
            </div>
            <p class="text-gray-700 mb-6 text-center md:text-left">This record shows if the vehicle has been declared as junk, salvage, or involved in significant insurance claims. These factors can greatly affect the vehicle's value and safety.</p>
            
            <!-- Table for desktop -->
            <div class="hidden md:block overflow-x-auto">
                <table id="junkSalvageTableContent" class="w-full table-fixed">
                    <thead class="bg-[#2B2B2B] text-white">
                        <tr>
                            <th class="p-4 text-center">Date</th>
                            <th class="p-4 text-center">Brander</th>
                            <th class="p-4 text-center">Details</th>
                        </tr>
                    </thead>
                    <tbody id="junkSalvageTableBody"></tbody>
                </table>
            </div>

            <!-- Cards for mobile -->
            <div class="md:hidden space-y-4 print:grid print:grid-cols-2 print:space-y-0 print:gap-4" id="junkSalvageCardGrid"></div>
        </section>

        <script>
            // Junk/Salvage/Insurance records data
            const junkSalvageData = {
                records: [
                    {
                        date: '05/12/2022',
                        brander: 'IAA WESTCHESTER, IL. Phone: 7084927000',
                        details: 'Record type: Junk and Salvage Vehicle disposition: Sold Intended for export: No'
                    },
                    {
                        date: '11/03/2021',
                        brander: 'IAA WESTCHESTER, IL. Phone: 7084927000',
                        details: 'Record type: Junk and Salvage Vehicle disposition: Sold Intended for export: No'
                    },
                    {
                        date: '07/18/2020',
                        brander: 'IAA WESTCHESTER, IL. Phone: 7084927000',
                        details: 'Record type: Junk and Salvage Vehicle disposition: Sold Intended for export: No'
                    }
                ]
            };

            function generateJunkSalvageRecords() {
                const section = document.getElementById('junkSalvageRecordsSection');
                const tableBody = document.getElementById('junkSalvageTableBody');
                const junkSalvageTableContent = document.getElementById('junkSalvageTableContent');
                const cardGrid = document.getElementById('junkSalvageCardGrid');
                const recordCount = document.getElementById('junkSalvageRecordCount');

                // Check if data exists
                const hasData = junkSalvageData !== null && 
                            junkSalvageData !== undefined && 
                            junkSalvageData.records && 
                            junkSalvageData.records.length > 0;

                if (!hasData) {
                    section.classList.remove('hidden');
                    junkSalvageTableContent.classList.add('hidden');
                    const noRecordsMessage = createNoRecordsMessage('Junk/Salvage/Insurance Records');
                    section.appendChild(noRecordsMessage);
                    return;
                }

                // Show section and update count
                section.classList.remove('hidden');
                recordCount.textContent = `${junkSalvageData.records.length} record(s) found`;

                // Generate table rows for desktop
                tableBody.innerHTML = junkSalvageData.records.map(record => `
                    <tr class="border-b hover:bg-gray-50 text-center">
                        <td class="p-4 text-center">${record.date}</td>
                        <td class="p-4 text-center">${record.brander}</td>
                        <td class="p-4 text-center">${record.details}</td>
                    </tr>
                `).join('');

                // Generate cards for mobile
                cardGrid.innerHTML = junkSalvageData.records.map(record => `
                    <div class="border rounded-lg p-3 space-y-3">
                        <div>
                            <div class="font-semibold text-gray-600 text-sm">Event Date</div>
                            <div>${record.date}</div>
                        </div>
                        <div>
                            <div class="font-semibold text-gray-600 text-sm">Brander</div>
                            <div>${record.brander}</div>
                        </div>
                        <div>
                            <div class="font-semibold text-gray-600 text-sm">Details</div>
                            <div>${record.details}</div>
                        </div>
                    </div>
                `).join('');
            }

            // Initialize junk/salvage/insurance records
            generateJunkSalvageRecords();
        </script>
        
        <!-- Salvage Auction Records -->
        <section section-name="Salvage Auction Records" id="salvageAuctionRecordsSection" class="p-6 hidden">
            <div class="flex flex-col md:flex-row justify-center md:justify-between items-center mb-4">
                <h2 class="text-2xl font-bold">Salvage Auction Records</h2>
                <span class="text-lg font-semibold" id="salvageAuctionRecordCount"></span>
            </div>
            <p class="text-gray-700 mb-6 text-center md:text-left">This record shows the vehicle's history in salvage auctions. Salvage auctions typically deal with vehicles that have been damaged, declared a total loss, or have other significant issues.</p>
            
            <!-- Table for desktop -->
            <div class="hidden md:block overflow-x-auto">
                <table id="salvageAuctionTableContent" class="w-full table-fixed">
                    <thead class="bg-[#2B2B2B] text-white">
                        <tr>
                            <th class="p-4 text-center">Date</th>
                            <th class="p-4 text-center">Type</th>
                            <th class="p-4 text-center">Details</th>
                        </tr>
                    </thead>
                    <tbody id="salvageAuctionTableBody"></tbody>
                </table>
            </div>

            <!-- Cards for mobile -->
            <div class="md:hidden space-y-4 print:grid print:grid-cols-2 print:space-y-0 print:gap-4" id="salvageAuctionCardGrid"></div>
        </section>

        <script>
            // Salvage Auction records data
            const salvageAuctionData = {
                records: [
                    {
                        date: '09/15/2022',
                        type: 'Salvage',
                        details: 'Primary Damage: Unknown Secondary Damage: Rear Mileage: 1 mi (Not required/ Exempt) Color: N/A'
                    },
                    {
                        date: '03/22/2021',
                        type: 'Salvage',
                        details: 'Primary Damage: Unknown Secondary Damage: Rear Mileage: 1 mi (Not required/ Exempt) Color: N/A'
                    },
                    {
                        date: '11/07/2020',
                        type: 'Salvage',
                        details: 'Primary Damage: Unknown Secondary Damage: Rear Mileage: 1 mi (Not required/ Exempt) Color: N/A'
                    }
                ]
            };

            function generateSalvageAuctionRecords() {
                const section = document.getElementById('salvageAuctionRecordsSection');
                const tableBody = document.getElementById('salvageAuctionTableBody');
                const salvageAuctionTableContent = document.getElementById('salvageAuctionTableContent');
                const cardGrid = document.getElementById('salvageAuctionCardGrid');
                const recordCount = document.getElementById('salvageAuctionRecordCount');

                // Check if data exists
                const hasData = salvageAuctionData !== null && 
                            salvageAuctionData !== undefined && 
                            salvageAuctionData.records && 
                            salvageAuctionData.records.length > 0;

                if (!hasData) {
                    section.classList.remove('hidden');
                    salvageAuctionTableContent.classList.add('hidden');
                    const noRecordsMessage = createNoRecordsMessage('Junk/Salvage/Insurance Records');
                    section.appendChild(noRecordsMessage);
                    return;
                }

                // Show section and update count
                section.classList.remove('hidden');
                recordCount.textContent = `${salvageAuctionData.records.length} record(s) found`;

                // Generate table rows for desktop
                tableBody.innerHTML = salvageAuctionData.records.map(record => `
                    <tr class="border-b hover:bg-gray-50 text-center">
                        <td class="p-4 text-center">${record.date}</td>
                        <td class="p-4 text-center">${record.type}</td>
                        <td class="p-4 text-center">${record.details}</td>
                    </tr>
                `).join('');

                // Generate cards for mobile
                cardGrid.innerHTML = salvageAuctionData.records.map(record => `
                    <div class="border rounded-lg p-3 space-y-3">
                        <div>
                            <div class="font-semibold text-gray-600 text-sm">Auction Date</div>
                            <div>${record.date}</div>
                        </div>
                        <div>
                            <div class="font-semibold text-gray-600 text-sm">Type</div>
                            <div>${record.type}</div>
                        </div>
                        <div>
                            <div class="font-semibold text-gray-600 text-sm">Details</div>
                            <div>${record.details}</div>
                        </div>
                    </div>
                `).join('');
            }

            // Initialize salvage auction records
            generateSalvageAuctionRecords();
        </script>

        <!-- Sale Records -->
        <section section-name="Sale Records" id="saleRecordsSection" class="p-6 hidden">
            <div class="flex flex-col md:flex-row justify-center md:justify-between items-center mb-4">
                <h2 class="text-2xl font-bold">Sale Records</h2>
                <span class="text-lg font-semibold" id="saleRecordCount"></span>
            </div>
            <p class="text-gray-700 mb-6 text-center md:text-left">This section contains details of historical sales listings of the vehicle</p>
            
            <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 print:grid-cols-2" id="saleRecordsGrid"></div>
        </section>

        <script>
            const saleHistoryData = {
                records: [
                    {
                        saleDate: '09-22-2019',
                        listingPrice: '$54,700',
                        sellerName: 'Desert Auto',
                        sellerLocation: 'Palm Desert,CA, USA',
                        details: {
                            mileage: '37,848 miles',
                            fuelType: 'Gas',
                            make: 'Ford',
                            model: 'Mustang',
                            trim: 'GT Convertible RWD',
                            color: 'Red'
                        }
                    },
                    {
                        saleDate: '10-07-2019',
                        listingPrice: '$54,700',
                        sellerName: 'Desert Auto',
                        sellerLocation: 'Palm Desert,CA, USA',
                        details: {
                            mileage: '37,848 miles',
                            fuelType: 'Gas',
                            make: 'Ford',
                            model: 'Mustang',
                            trim: 'GT Convertible RWD',
                            color: 'Red'
                        }
                    },
                    {
                        saleDate: '04-29-2020',
                        listingPrice: '$4,275',
                        sellerName: 'Desert Auto',
                        sellerLocation: 'Palm Desert,CA, USA. 760-660-3300',
                        details: {
                            mileage: '37,000 miles',
                            fuelType: 'Gasoline',
                            year: '1966',
                            make: 'Ford',
                            model: 'Mustang',
                            trim: 'GT Package',
                            color: 'Red'
                        }
                    }
                ]
            };

            function generateSaleRecords() {
                const section = document.getElementById('saleRecordsSection');
                const grid = document.getElementById('saleRecordsGrid');
                const recordCount = document.getElementById('saleRecordCount');

                // Check if data exists
                const hasData = saleHistoryData && 
                            saleHistoryData.records && 
                            saleHistoryData.records.length > 0;

                if (!hasData) {
                    section.classList.remove('hidden');
                    grid.classList.remove('grid');
                    const noRecordsMessage = createNoRecordsMessage('Sale');
                    grid.innerHTML = '';
                    grid.appendChild(noRecordsMessage);
                    return;
                }

                // Show section and update count
                section.classList.remove('hidden');
                recordCount.textContent = `${saleHistoryData.records.length} record(s) found`;

                // Generate sale record cards
                grid.innerHTML = saleHistoryData.records.map(record => `
                    <div class="border rounded-lg p-3">
                        <div class="mb-3 border-b border-black pb-2">
                            <div class="font-semibold">Sale Date: ${record.saleDate}</div>
                        </div>
                        
                        <div class="mb-2">
                            <div>Listing Price: ${record.listingPrice}</div>
                            <div>Seller Name: ${record.sellerName}</div>
                            <div>Seller Location: ${record.sellerLocation}</div>
                        </div>

                        <div class="mt-4">
                            <div class="font-semibold mb-2 border-b border-black pb-2">Details</div>
                            <div class="space-y-1">
                                ${record.details.mileage ? `<div>Mileage: ${record.details.mileage}</div>` : ''}
                                ${record.details.fuelType ? `<div>Fuel Type: ${record.details.fuelType}</div>` : ''}
                                ${record.details.year ? `<div>Year: ${record.details.year}</div>` : ''}
                                ${record.details.make ? `<div>Make: ${record.details.make}</div>` : ''}
                                ${record.details.model ? `<div>Model: ${record.details.model}</div>` : ''}
                                ${record.details.trim ? `<div>Trim: ${record.details.trim}</div>` : ''}
                                ${record.details.color ? `<div>Color: ${record.details.color}</div>` : ''}
                            </div>
                        </div>
                    </div>
                `).join('');
            }

            // Initialize sale records
            generateSaleRecords();
        </script>

        <!-- Auction Section -->
        <section section-name="Auction History" class="p-6 custom-break">
            <div class="mx-auto space-y-4" id="auctionHistoryContainer">
                <!-- Content will be dynamically inserted here -->
            </div>

            <script>
                // Example auction data structure (unchanged)
                const auctionData = {
                    records: [
                        {
                            status: "Sold",
                            date: "01/29/2024",
                            price: "$250",
                            lotNumber: "0-40168573",
                            images: [
                                "assets/car.png",
                                "assets/car2.png",
                                "assets/car.png",
                                "assets/car2.png",
                                "assets/car.png",
                                "assets/car2.png",
                                "assets/car.png",
                                "assets/car2.png",
                                "assets/car.png",
                                "assets/car2.png"
                            ],
                            features: {
                                runsAndDrives: false,
                                engineStart: false,
                                hasKeys: true
                            },
                            titleAndCondition: {
                                titleType: "Salvage",
                                titleDescription: "N/A",
                                primaryDamage: "Flood",
                                secondaryDamage: "N/A",
                                vin: "2FMPK3K91JBC42541",
                                common: "N/A"
                            },
                            saleDetails: {
                                titleType: "CD",
                                titleDescription: "N/A",
                                primaryDamage: "Burn - engine",
                                secondaryDamage: "N/A"
                            },
                            technicalSpecs: {
                                odometer: "103,760 mi (166,986 km)",
                                estimatedRepairCost: "$14,776",
                                avgEstimatedRetailValue: "N/A",
                                bodyStyle: "Sport Utility",
                                color: "N/A",
                                engineType: "2.0L",
                                fuelType: "N/A",
                                cylinders: "I-4",
                                transmission: "Automatic"
                            },
                            vehicleSpecs: {
                                year: "2019",
                                make: "Toyota",
                                model: "Highlander",
                                marketValue: "-",
                                vin: "5TDDZRFHXKS730863"
                            }
                        },
                        {
                            status: "Unsold",
                            date: "02/15/2024",
                            price: "$300",
                            lotNumber: "0-50168574",
                            images: [
                                "assets/car.png",
                                "assets/car2.png",
                                "assets/car.png",
                                "assets/car2.png"
                            ],
                            features: {
                                runsAndDrives: true,
                                engineStart: true,
                                hasKeys: false
                            },
                            titleAndCondition: {
                                titleType: "Clean",
                                titleDescription: "N/A",
                                primaryDamage: "None",
                                secondaryDamage: "N/A",
                                vin: "1HGCM82633A004352",
                                common: "N/A"
                            },
                            saleDetails: {
                                titleType: "CT",
                                titleDescription: "N/A",
                                primaryDamage: "None",
                                secondaryDamage: "N/A"
                            },
                            technicalSpecs: {
                                odometer: "85,000 mi (136,794 km)",
                                estimatedRepairCost: "$0",
                                avgEstimatedRetailValue: "$8,500",
                                bodyStyle: "Sedan",
                                color: "Silver",
                                engineType: "2.4L",
                                fuelType: "Gasoline",
                                cylinders: "I-4",
                                transmission: "Automatic"
                            },
                            vehicleSpecs: {
                                year: "2020",
                                make: "Honda",
                                model: "Accord",
                                marketValue: "$9,000",
                                vin: "1HGCM82633A004352"
                            }
                        }
                    ]
                };

                function renderAuctionHistory(data) {
                    const container = document.getElementById('auctionHistoryContainer');
                    
                    if (!data || !data.records || data.records.length === 0) {
                        container.innerHTML = `
                            <h2 class="text-2xl font-bold">Auction History</h2>
                            <p class="text-gray-700 text-center md:text-left">
                                This section contains information about the auction history of the vehicle. 
                                Includes auction information with 10+ auction photos per listing
                            </p>
                            <p class="text-gray-500 italic mt-4">No records found</p>
                        `;
                        return;
                    }

                    // Sort records by date in descending order (most recent first)
                    const sortedRecords = data.records.sort((a, b) => new Date(b.date) - new Date(a.date));
                    const totalRecords = sortedRecords.length;

                    container.innerHTML = `
                        <div class="flex flex-col md:flex-row justify-center md:justify-between items-center mb-4">
                            <h2 class="text-2xl font-bold">Auction History</h2>
                            <span class="text-gray-600 font-semibold">${totalRecords} auction record(s) found</span>
                        </div>

                        <p class="text-gray-700">
                            This section contains information about the auction history of the vehicle. 
                            Includes auction information with 10+ auction photos per listing
                        </p>

                        ${sortedRecords.map((record, index) => `
                            <div class="mt-8 pb-8 ${index < totalRecords - 1 ? 'border-b border-gray-300' : ''}">
                                <h3 class="text-xl font-semibold mb-4 no-print">Record #${index + 1}</h3>
                                <div class="grid md:grid-cols-2 gap-3">
                                    <div class="space-y-4">
                                        <!-- Main Image -->
                                        <div class="relative w-full rounded-lg overflow-hidden no-print" style="padding-top: 56.25%;">
                                            <img 
                                                src="${record.images[0]}" 
                                                alt="Vehicle" 
                                                class="absolute top-0 left-0 w-full h-full object-cover main-image transition-opacity duration-300" 
                                                id="main-image-${index}"
                                            >
                                            <div 
                                                class="absolute bottom-3 right-3 p-2 bg-black bg-opacity-50 rounded-full cursor-pointer transition-opacity duration-200 fullscreen-icon"
                                            >
                                                <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 text-white" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 8V4m0 0h4M4 4l5 5m11-1V4m0 0h-4m4 0l-5 5M4 16v4m0 0h4m-4 0l5-5m11 5l-5-5m5 5v-4m0 4h-4" />
                                                </svg>
                                            </div>
                                        </div>
                                        
                                        <!-- Thumbnails Grid -->
                                        <div class="flex overflow-y-scroll md:overflow-y-hidden md:grid grid-cols-4 gap-2 thumbnails break-inside-avoid" id="thumbnails-${index}">
                                            <h3 class="hidden text-xl font-semibold mb-4 break-after-avoid col-span-full print-only">Record #${index + 1}</h3>
                                            ${record.images.map((img, imgIndex) => `
                                                <img src="${img}" alt="" class="w-full h-20 object-cover rounded cursor-pointer thumbnail transition-all duration-200 hover:opacity-80" data-index="${imgIndex}">
                                            `).join('')}
                                        </div>
                                    </div>

                                    <!-- Info Panels -->
                                    <div class="space-y-2 break-inside">
                                        <!-- Status Panel -->
                                        <div class="border border-black rounded p-3">
                                            <div class="border-b border-black pb-2 text-center">Status: <span class="font-medium">${record.status}</span></div>
                                            <div class="grid grid-cols-[repeat(auto-fit,minmax(100px,1fr))] gap-2 pt-3">
                                                <div>
                                                    <div class="text-black text-sm">Date</div>
                                                    <div>${record.date}</div>
                                                </div>
                                                <div>
                                                    <div class="text-black text-sm">Price</div>
                                                    <div>${record.price}</div>
                                                </div>
                                                <div>
                                                    <div class="text-black text-sm">Lot Number</div>
                                                    <div>${record.lotNumber}</div>
                                                </div>
                                            </div>
                                        </div>

                                        <!-- Vehicle Status -->
                                        <div class="flex flex-row items-center justify-between md:justify-center gap-2 sm:gap-4 py-2">
                                            <div class="flex items-center gap-1 sm:gap-2 ${record.features.runsAndDrives ? 'text-green-500' : 'text-red-500'}">
                                                <i data-lucide="${record.features.runsAndDrives ? 'check-circle' : 'x-circle'}" class="w-4 h-4 sm:w-5 sm:h-5"></i>
                                                <span class="text-sm sm:text-base">Runs & Drives</span>
                                            </div>
                                            <div class="flex items-center gap-1 sm:gap-2 ${record.features.engineStart ? 'text-green-500' : 'text-red-500'}">
                                                <i data-lucide="${record.features.engineStart ? 'check-circle' : 'x-circle'}" class="w-4 h-4 sm:w-5 sm:h-5"></i>
                                                <span class="text-sm sm:text-base">Engine Start</span>
                                            </div>
                                            <div class="flex items-center gap-1 sm:gap-2 ${record.features.hasKeys ? 'text-green-500' : 'text-red-500'}">
                                                <i data-lucide="${record.features.hasKeys ? 'check-circle' : 'x-circle'}" class="w-4 h-4 sm:w-5 sm:h-5"></i>
                                                <span class="text-sm sm:text-base">Has Keys</span>
                                            </div>
                                        </div>

                                        <!-- Title & Condition -->
                                        <div class="grid md:grid-cols-2 print:grid-cols-2 gap-2">
                                            <div class="border border-black rounded p-3">
                                                <h3 class="font-semibold mb-3 border-b border-black pb-3">Title & Condition</h3>
                                                <div class="gap-1 text-sm pt-1 flex flex-col">
                                                    ${Object.entries(record.titleAndCondition).map(([key, value]) => `
                                                        <span class="text-black font-medium">${key.replace(/([A-Z])/g, ' $1').trim()}: <span class="font-normal">${value}</span></span>
                                                    `).join('')}
                                                </div>
                                            </div>

                                            <div class="border border-black rounded p-3">
                                                <h3 class="font-semibold mb-3 border-b border-black pb-3">Sale Details</h3>
                                                <div class="gap-1 text-sm pt-1 flex flex-col">
                                                    ${Object.entries(record.saleDetails).map(([key, value]) => `
                                                        <span class="text-black font-medium">${key.replace(/([A-Z])/g, ' $1').trim()}: <span class="font-normal">${value}</span></span>
                                                    `).join('')}
                                                </div>
                                            </div>
                                        </div>

                                        <!-- Specifications -->
                                        <div class="grid md:grid-cols-2 gap-2 print:grid-cols-2">
                                            <div class="border border-black rounded p-3">
                                                <h3 class="font-semibold mb-3 border-b border-black pb-3">Technical Specifications</h3>
                                                <div class="gap-1 text-sm pt-1 flex flex-col">
                                                    ${Object.entries(record.technicalSpecs).map(([key, value]) => `
                                                        <span class="text-black font-medium">${key.replace(/([A-Z])/g, ' $1').trim()}: <span class="font-normal">${value}</span></span>
                                                    `).join('')}
                                                </div>
                                            </div>

                                            <div class="border border-black rounded p-3">
                                                <h3 class="font-semibold mb-3 border-b border-black pb-3">Vehicle Specifications</h3>
                                                <div class="gap-1 text-sm pt-1 flex flex-col">
                                                    ${Object.entries(record.vehicleSpecs).map(([key, value]) => `
                                                        <span class="text-black font-medium">${key.replace(/([A-Z])/g, ' $1').trim()}: <span class="font-normal">${value}</span></span>
                                                    `).join('')}
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        `).join('')}
                    `;

                    // Initialize Lucide icons after content is inserted
                    lucide.createIcons();

                    // Add click event listeners to thumbnails
                    sortedRecords.forEach((record, recordIndex) => {
                        const thumbnails = document.querySelectorAll(`#thumbnails-${recordIndex} .thumbnail`);
                        const mainImage = document.getElementById(`main-image-${recordIndex}`);

                        thumbnails.forEach(thumbnail => {
                            thumbnail.addEventListener('click', function() {
                                const imageIndex = this.getAttribute('data-index');
                                mainImage.src = record.images[imageIndex];
                            });
                        });
                    });
                }

                // Initial render
                renderAuctionHistory(auctionData);
            </script>
        </section>

        <!-- Sales Listing History Section -->
        <section section-name="Sales Listing History" class="p-6">
            <div class="mx-auto space-y-4" id="salesListingContainer">
                <!-- Content will be dynamically inserted here -->
            </div>
            <script>
                // Example sales listing data structure
                const salesListingData = {
                    records: [
                        {
                            images: [
                                "assets/car.png",
                                "assets/car2.png",
                                "assets/car.png",
                                "assets/car2.png",
                                "assets/car.png",
                                "assets/car2.png",
                                "assets/car.png",
                                "assets/car2.png"
                            ],
                            saleStatus: {
                                listingPrice: "$66,995",
                                sellerType: "Dealership",
                                dealerName: "Jim Schmidt Ford Incorporated"
                            },
                            certification: {
                                certified: true,
                                type: "Certified Pre - Owned"
                            },
                            saleDetails: {
                                status: "Active",
                                date: "2023-06-15",
                                document: "-",
                                country: "United States",
                                state: "OH",
                                city: "Hicksville"
                            },
                            technicalSpecifications: {
                                odometerKm: "67,550",
                                odometerMi: "41,974",
                                primaryDamage: "-",
                                secondaryDamage: "-",
                                condition: "Used",
                                exteriorColor: "Arctic Black Metallic",
                                interiorColor: "Black Onyx",
                                exteriorCondition: "-",
                                interiorCondition: "-"
                            },
                            listingDetails: {
                                listingPrice: "$66,995",
                                retailValue: "-",
                                repairCost: "-"
                            }
                        },
                        {
                            images: [
                                "assets/car2.png",
                                "assets/car.png",
                                "assets/car2.png",
                                "assets/car.png",
                                "assets/car2.png",
                                "assets/car.png",
                                "assets/car2.png",
                                "assets/car.png"
                            ],
                            saleStatus: {
                                listingPrice: "$64,500",
                                sellerType: "Private Seller",
                                dealerName: "-"
                            },
                            certification: {
                                certified: false,
                                type: "-"
                            },
                            saleDetails: {
                                status: "Sold",
                                date: "2023-05-20",
                                document: "Bill of Sale",
                                country: "United States",
                                state: "CA",
                                city: "Los Angeles"
                            },
                            technicalSpecifications: {
                                odometerKm: "72,420",
                                odometerMi: "45,000",
                                primaryDamage: "Minor Scratch",
                                secondaryDamage: "-",
                                condition: "Used",
                                exteriorColor: "Pearl White",
                                interiorColor: "Tan Leather",
                                exteriorCondition: "Excellent",
                                interiorCondition: "Good"
                            },
                            listingDetails: {
                                listingPrice: "$64,500",
                                retailValue: "$68,000",
                                repairCost: "$500"
                            }
                        }
                    ]
                };

                function renderSalesListing(data) {
                    const container = document.getElementById('salesListingContainer');
                    
                    if (!data || !data.records || data.records.length === 0) {
                        container.innerHTML = `
                            <h2 class="text-2xl font-bold">Sales Listing History</h2>
                            <p class="text-gray-700">
                                We have found 0 sales listings record for this vehicle
                            </p>
                            <p class="text-gray-500 italic mt-4">No records found</p>
                        `;
                        return;
                    }

                    const totalRecords = data.records.length;

                    container.innerHTML = `
                        <div class="flex flex-col md:flex-row justify-center md:justify-between items-center mb-4">
                            <h2 class="text-2xl font-bold">Sales Listing History</h2>
                            <span class="text-gray-600 font-bold">${totalRecords} sales listing record(s) found</span>
                        </div>

                        <p class="text-gray-700">
                            We have found ${totalRecords} sales listings record for this vehicle
                        </p>

                        ${data.records.map((record, index) => `
                            <div class="mt-8 pb-8 ${index < totalRecords - 1 ? 'border-b border-gray-300' : ''}">
                                <h3 class="text-xl font-semibold mb-4 no-print">Record #${index + 1}</h3>
                                <div class="grid md:grid-cols-2 gap-3">
                                    <div class="space-y-4">
                                        <!-- Main Image -->
                                        <div class="relative w-full rounded-lg overflow-hidden no-print" style="padding-top: 56.25%;">
                                            <img 
                                                src="${record.images[0]}" 
                                                alt="Vehicle" 
                                                class="absolute top-0 left-0 w-full h-full object-cover main-image transition-opacity duration-300" 
                                                id="main-image-${index}"
                                            >
                                            <div 
                                                class="absolute bottom-3 right-3 p-2 bg-black bg-opacity-50 rounded-full cursor-pointer transition-opacity duration-200 fullscreen-icon"
                                            >
                                                <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 text-white" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 8V4m0 0h4M4 4l5 5m11-1V4m0 0h-4m4 0l-5 5M4 16v4m0 0h4m-4 0l5-5m11 5l-5-5m5 5v-4m0 4h-4" />
                                                </svg>
                                            </div>
                                        </div>
                                        
                                        <!-- Thumbnails Grid -->
                                        <div class="flex overflow-y-scroll md:overflow-y-hidden md:grid grid-cols-4 gap-2 thumbnails break-inside-avoid" id="thumbnails-${index}">
                                            <h3 class="hidden text-xl font-semibold mb-4 break-after-avoid col-span-full print-only">Record #${index + 1}</h3>
                                            ${record.images.map((img, imgIndex) => `
                                                <img 
                                                    src="${img}" 
                                                    alt="" 
                                                    class="w-full h-20 object-cover rounded cursor-pointer thumbnail transition-all duration-200 hover:opacity-80 ${imgIndex === 0 ? 'ring-2 ring-blue-500' : ''}" 
                                                    data-index="${imgIndex}"
                                                >
                                            `).join('')}
                                        </div>
                                    </div>

                                    <!-- Info Panels -->
                                    <div class="space-y-3">
                                        <!-- Sale Status -->
                                        <div class="border border-black rounded p-4">
                                            <h3 class="mb-3 text-center border-b border-black pb-2">Sale Status: <span class="font-semibold">${record.saleDetails.status}</span></h3>
                                            <div class="grid grid-cols-[repeat(auto-fit,minmax(100px,1fr))] gap-2 pt-3">
                                                <div>
                                                    <div class="text-gray-600 text-sm">Listing Price</div>
                                                    <div>${record.saleStatus.listingPrice}</div>
                                                </div>
                                                <div>
                                                    <div class="text-gray-600 text-sm">Seller Type</div>
                                                    <div>${record.saleStatus.sellerType}</div>
                                                </div>
                                                <div>
                                                    <div class="text-gray-600 text-sm">Dealer Name</div>
                                                    <div>${record.saleStatus.dealerName}</div>
                                                </div>
                                            </div>
                                        </div>

                                        ${record.certification.certified ? `
                                            <div class="flex items-center gap-2 text-green-600 justify-center">
                                                <i data-lucide="check-circle" class="w-5 h-5"></i>
                                                <span>${record.certification.type}</span>
                                            </div>
                                        ` : ''}

                                        <!-- Sale Details -->
                                        <div class="grid md:grid-cols-2 print:grid-cols-2 gap-2">
                                            <div class="border border-black rounded p-4">
                                                <h3 class="font-semibold mb-3 border-b border-black pb-3">Sale details</h3>
                                                <div class="space-y-2 text-sm pt-1">
                                                    ${Object.entries(record.saleDetails).map(([key, value]) => `
                                                        <div class="grid grid-cols-2">
                                                            <span class="text-gray-600">${key.replace(/([A-Z])/g, ' $1').trim()}:</span>
                                                            <span>${value}</span>
                                                        </div>
                                                    `).join('')}
                                                </div>
                                            </div>

                                            <div class="border border-black rounded p-4">
                                                <h3 class="font-semibold mb-3 border-b border-black pb-3">Technical Specifications</h3>
                                                <div class="space-y-2 text-sm pt-1">
                                                    ${Object.entries(record.technicalSpecifications).map(([key, value]) => `
                                                        <div class="grid grid-cols-2">
                                                            <span class="text-gray-600">${key.replace(/([A-Z])/g, ' $1').trim()}:</span>
                                                            <span>${value}</span>
                                                        </div>
                                                    `).join('')}
                                                </div>
                                            </div>
                                        </div>

                                        <!-- Listing Details -->
                                        <div class="border border-black rounded p-4">
                                            <h3 class="font-semibold mb-3 border-b border-black pb-3">Listing details</h3>
                                            <div class="space-y-2 text-sm pt-1">
                                                ${Object.entries(record.listingDetails).map(([key, value]) => `
                                                    <div class="grid grid-cols-2">
                                                        <span class="text-gray-600">${key.replace(/([A-Z])/g, ' $1').trim()}:</span>
                                                        <span>${value}</span>
                                                    </div>
                                                `).join('')}
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        `).join('')}
                    `;

                    // Initialize Lucide icons after content is inserted
                    lucide.createIcons();

                    // Add click event listeners to thumbnails
                    data.records.forEach((record, recordIndex) => {
                        const thumbnails = document.querySelectorAll(`#salesListingContainer #thumbnails-${recordIndex} .thumbnail`);
                        const mainImage = document.querySelector(`#salesListingContainer #main-image-${recordIndex}`);

                        thumbnails.forEach(thumbnail => {
                            thumbnail.addEventListener('click', function() {
                                const imageIndex = this.getAttribute('data-index');
                                
                                // Remove active state from all thumbnails
                                thumbnails.forEach(thumb => {
                                    thumb.classList.remove('ring-2', 'ring-blue-500');
                                });
                                
                                // Add active state to clicked thumbnail
                                this.classList.add('ring-2', 'ring-blue-500');
                                
                                // Update main image with fade effect
                                mainImage.style.opacity = 0;
                                mainImage.src = record.images[imageIndex];
                                mainImage.onload = function() {
                                    mainImage.style.opacity = 1;
                                }
                            });
                        });
                    });
                }
                // Initial render
                renderSalesListing(salesListingData);
            </script>
        </section>
        
        <!-- Title Brand Check -->
        <section section-name="Title Brand Check" id="titleBrandSection" class="p-6 hidden">
            <div class="flex flex-col md:flex-row justify-center md:justify-between items-center mb-4">
                <h2 class="text-2xl font-bold">Title Brand Check</h2>
                <span class="text-lg font-semibold" id="problemCount"></span>
            </div>
            <p class="text-gray-700 mb-6 text-center md:text-left">This section contains major checks for potential problems related to vehicles title.</p>
            
            <div class="grid md:grid-cols-2 print:grid-cols-3 gap-2 border rounded-md p-2 sm:p-3" id="brandGrid"></div>
        </section>
        
        <script>
            // Simple flags for brand records (0 = no record, 1 = has record)
            const brandFlags = {
                fireBrand: 1,
                hailBrand: 0,
                floodBrand: 0,
                junkBrand: 0,
                manufacturerBuyback: 0,
                lemonBrand: 0,
                salvageBrand: 0,
                rebuiltBrand: 0,
                odometerBrand: 0,
                auctionBrand: 0
            };
        
            // Brand configuration
            const brandConfig = [
                {
                    id: 'fireBrand',
                    icon: 'flame',
                    title: 'Fire Brand',
                    getMessage: (hasRecord) => hasRecord 
                        ? 'The vehicle title has fire damage record'
                        : 'The vehicle title has no fire damage record'
                },
                {
                    id: 'hailBrand',
                    icon: 'cloud-rain',
                    title: 'Hail brand',
                    getMessage: (hasRecord) => hasRecord
                        ? 'The vehicle title has hail damage record'
                        : 'The vehicle title has no hail damage record'
                },
                {
                    id: 'floodBrand',
                    icon: 'waves',
                    title: 'Flood brand',
                    getMessage: (hasRecord) => hasRecord
                        ? 'The vehicle title has flood damage record'
                        : 'The vehicle title has no flood damage record'
                },
                {
                    id: 'junkBrand',
                    icon: 'car',
                    title: 'Junk or scrapped brand',
                    getMessage: (hasRecord) => hasRecord
                        ? 'The vehicle title has auction junk record'
                        : 'The vehicle title has no junk record'
                },
                {
                    id: 'manufacturerBuyback',
                    icon: 'factory',
                    title: 'Manufacturer buyback',
                    getMessage: (hasRecord) => hasRecord
                        ? 'The vehicle title has manufacturer buyback record'
                        : 'The vehicle title has no manufacturer buyback record'
                },
                {
                    id: 'lemonBrand',
                    icon: 'alert-circle',
                    title: 'Lemon brand',
                    getMessage: (hasRecord) => hasRecord
                        ? 'The vehicle title has lemon brand record'
                        : 'The vehicle title has no lemon brand record'
                },
                {
                    id: 'salvageBrand',
                    icon: 'wrench',
                    title: 'Salvage brand',
                    getMessage: (hasRecord) => hasRecord
                        ? 'The vehicle title has salvage brand record'
                        : 'The vehicle title has no salvage brand record'
                },
                {
                    id: 'rebuiltBrand',
                    icon: 'tool',
                    title: 'Rebuilt or rebuildable brand',
                    getMessage: (hasRecord) => hasRecord
                        ? 'The vehicle title has rebuilt or rebuildable record'
                        : 'The vehicle title has no rebuilt or rebuildable record'
                },
                {
                    id: 'odometerBrand',
                    icon: 'gauge',
                    title: 'Odometer Brand',
                    getMessage: (hasRecord) => hasRecord
                        ? 'The vehicle title has mileage discrepancy record'
                        : 'The vehicle title has no mileage discrepancy record'
                },
                {
                    id: 'auctionBrand',
                    icon: 'gavel',
                    title: 'Auction brand',
                    getMessage: (hasRecord) => hasRecord
                        ? 'The vehicle title has auction record'
                        : 'The vehicle title has no auction record'
                }
            ];
        
            function generateBrandChecks() {
                const section = document.getElementById('titleBrandSection');
                const grid = document.getElementById('brandGrid');
                const problemCount = document.getElementById('problemCount');
        
                const hasAnyRecord = brandFlags !== null && brandFlags !== undefined;
        
                // Hide section if no data
                if (!hasAnyRecord) {
                    section.classList.add('hidden');
                    return;
                }
        
                // Show section and update problem count
                section.classList.remove('hidden');
                const totalProblems = Object.values(brandFlags).reduce((sum, flag) => sum + flag, 0);
                problemCount.textContent = `${totalProblems} problem(s) found`;
        
                // Generate brand cards
                grid.innerHTML = brandConfig.map(brand => {
                    const hasRecord = brandFlags[brand.id] === 1;
                    
                    return `
                        <div class="border border-black rounded-lg overflow-hidden hover-shadow-orange ${hasRecord ? 'grayyedBG-1-red' : 'grayyedBG-1'}">
                            <div class="p-3">
                                <div class="flex items-center gap-2 mb-2">
                                    <i data-lucide="${brand.icon}" class="w-5 h-5 ${hasRecord ? 'text-red-600' : 'text-gray-600'}"></i>
                                    <span class="font-semibold ${hasRecord ? 'text-red-600' : 'text-gray-900'}">${brand.title}</span>
                                </div>
                                <div class="w-full border-t mt-2 mb-1.5" style="border-color: currentColor; opacity: 1;"></div>
                                <p class="${hasRecord ? 'text-red-600' : 'text-gray-600'}">${brand.getMessage(hasRecord)}</p>
                            </div>
                        </div>
                    `;
                }).join('');
        
                // Initialize Lucide icons
                lucide.createIcons();
            }
        
            // Initialize brand checks
            generateBrandChecks();
        </script>

        <!-- Title Brand Checks 2 Section -->
        <section section-name="Title Brand Checks" id="titleBrandChecksSection" class="p-6 custom-break hidden">
            <h2 class="text-2xl font-bold mb-2 text-center md:text-left">Title Brand Checks</h2>
            <p class="text-gray-700 mb-6 text-center md:text-left">
                This section lists our checks for potential problems related to the title.
            </p>
            
            <div id="checksGrid" class="grid grid-cols-1 print:grid-cols-3 md:grid-cols-3 lg:grid-cols-5 gap-4 border p-3 rounded-md">
                <!-- Grid items will be inserted here by JavaScript -->
            </div>
        </section>

        <script>
            // Title brand checks data
            const titleBrandChecks = {
                flood_damage: 1,
                fire_damage: 1,
                hail_damage: 1,
                salt_water_damage: 0,
                vandalism: 0,
                kit: 0,
                dismantled: 0,
                junk: 1,
                rebuilt: 0,
                reconstructed: 0,
                salvage_damage: 0,
                salvage_stolen: 0,
                salvage_other: 0,
                test_vehicle: 0,
                refurbished: 0,
                replica: 0,
                totaled: 0,
                owner_retained: 0,
                bond_posted: 0,
                memorandum_copy: 0,
                parts_only: 0,
                recovered_theft: 0,
                undisclosed_lien: 0,
                prior_owner_retained: 0,
                vehicle_non_conformity: 0,
                vehicle_non_conformity_corrected: 0,
                vehicle_safety_defect_uncorrected: 0,
                vehicle_safety_defect_corrected: 0,
                vin_replaced: 0,
                gray_market_non_compliant: 0,
                gray_market_compliant: 0,
                manufacturer_buy_back: 0,
                former_rental: 0,
                disclosed_damage: 0,
                prior_non_repairable: 0,
                crushed: 0,
                hazardous: 0,
                export_only_vehicle: 0,
                odometer_actual: 0,
                odometer_not_actual: 0,
                odometer_tampering_verified: 0,
                odometer_exempt_disclosure: 1,
                odometer_exceeds_mechanical_limits: 0,
                odometer_may_be_altered: 0,
                odometer_replaced: 0,
                odometer_reading_renewal: 0,
                odometer_discrepancy: 0,
                odometer_call_title_division: 0,
                odometer_exceeds_limits_rectified: 0
            };

            function formatTitle(key) {
                // Remove underscores and capitalize first letter of each word
                return key.split('_')
                    .map(word => word.charAt(0).toUpperCase() + word.slice(1))
                    .join(' ');
            }

            function generateTitleBrandChecks() {
                const section = document.getElementById('titleBrandChecksSection');
                const grid = document.getElementById('checksGrid');
                
                // Check if titleBrandChecks is null or empty
                if (!titleBrandChecks || Object.keys(titleBrandChecks).length === 0) {
                    section.classList.add('hidden');
                    return;
                }

                // If we have data, show the section
                section.classList.remove('hidden');
                
                // Generate HTML for each check
                const checksHTML = Object.entries(titleBrandChecks).map(([key, value]) => {
                    const title = formatTitle(key);
                    const isIssue = value === 1;
                    
                    return `
                        <div class="border border-black rounded-lg p-2 flex flex-col items-center text-center hover-shadow-orange ${isIssue ? 'grayyedBG-1-red' : 'grayyedBG-1'}">
                            ${isIssue 
                                ? '<svg class="w-6 h-6 text-red-500 mb-2" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path></svg>'
                                : '<svg class="w-6 h-6 text-green-500 mb-2" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg>'
                            }
                            <h3 class="font-medium">${title}?</h3>
                            <div class="w-full border-t my-2" style="border-color: currentColor; opacity: 1;"></div>
                            <p class="text-sm text-gray-600">
                                ${isIssue ? `${title} record found` : 'No problems Found'}
                            </p>
                        </div>
                    `;
                }).join('');

                // Insert the generated HTML into the grid
                grid.innerHTML = checksHTML;
            }

            // Initialize the checks
            generateTitleBrandChecks();
        </script>

        <!-- Vehicle Market Value -->
        <section section-name="Market Value" class="p-6" id="marketValueContainer">
            <script>
                // Market Value Data
                const marketValueData = {
                    conditions: [
                        {
                            type: "Rough Condition",
                            description: "Runs fine, visible flaws",
                            value: 30100
                        },
                        {
                            type: "Average Condition",
                            description: "Drives well, minor flaws.",
                            value: 48800
                        },
                        {
                            type: "Clean Condition",
                            description: "Like new, show-ready",
                            value: 70200
                        },
                        {
                            type: "Outstanding Condition",
                            description: "World-class, competition-level.",
                            value: 83200
                        }
                    ]
                };

                function formatCurrency(value) {
                    return `$${value.toLocaleString()}`;
                }

                function renderMarketValue(data) {
                    if (!data || !data.conditions || data.conditions.length === 0) {
                        document.getElementById('marketValueContainer').style.display = 'none';
                        return;
                    }

                    const container = document.getElementById('marketValueContainer');
                    
                    container.innerHTML = `
                    <h2 class="text-center md:text-left text-2xl font-bold">Vehicle Market Value</h2>
                    <p class="text-gray-700 text-center md:text-left mt-2 mb-6">
                        This section contains market value for this vehicle based on its condition.
                    </p>
                        <div class="flex flex-col mx-auto border rounded-md p-2 sm:p-3 gap-6">

                            <!-- Chart -->
                            <div>
                                <canvas id="marketValueChart"></canvas>
                            </div>

                            <!-- Condition Panels -->
                            <div class="-order-1 md:order-2 grid md:grid-cols-2 lg:grid-cols-4 print:grid-cols-2 gap-4">
                                ${data.conditions.map(condition => `
                                    <div class="border border-black rounded-lg p-2 bg-white grayyedBG-1 hover-shadow-orange">
                                        <h3 class="font-semibold">${condition.type}</h3>
                                        <p class="text-sm text-gray-600">${condition.description}</p>
                                        <div class="w-full border-t my-2" style="border-color: currentColor; opacity: 1;"></div>
                                        <p class="text-xl font-bold mt-2">${formatCurrency(condition.value)}</p>
                                    </div>
                                `).join('')}
                            </div>
                        </div>
                    `;

                    // Initialize Chart.js
                    const ctx = document.getElementById('marketValueChart').getContext('2d');
                    
                    const chart = new Chart(ctx, {
                        type: 'line',
                        data: {
                            labels: data.conditions.map(item => item.type.split(' ')[0]),
                            datasets: [
                                {
                                    data: data.conditions.map(item => item.value),
                                    borderColor: '#000',
                                    backgroundColor: '#fff',
                                    pointBackgroundColor: '#000',
                                    pointBorderColor: '#fff',
                                    pointBorderWidth: 2,
                                    pointRadius: 6,
                                    pointHoverRadius: 8,
                                    tension: 0.4,
                                    borderWidth: 2,
                                    zIndex: 2
                                },
                                {
                                    data: data.conditions.map(item => item.value),
                                    borderColor: '#e5e7eb',
                                    borderDash: [5, 5],
                                    borderWidth: 1,
                                    pointRadius: 0,
                                    fill: false,
                                    tension: 0.4,
                                    zIndex: 1
                                }
                            ]
                        },
                        options: {
                            responsive: true,
                            maintainAspectRatio: true,
                            aspectRatio: 2,
                            plugins: {
                                legend: {
                                    display: false
                                },
                                tooltip: {
                                    backgroundColor: 'rgba(254, 246, 213, 1)',
                                    titleColor: '#000',
                                    bodyColor: '#000',
                                    titleFont: {
                                        size: 16,
                                        weight: '600'
                                    },
                                    bodyFont: {
                                        size: 16,
                                        weight: '600'
                                    },
                                    titleMarginBottom: 3,
                                    padding: 12,
                                    displayColors: false,
                                    callbacks: {
                                        label: function(context) {
                                            return formatCurrency(context.raw);
                                        }
                                    },
                                    borderColor: '#000',
                                    borderWidth: 1,
                                    cornerRadius: 8
                                }
                            },
                            scales: {
                                y: {
                                    beginAtZero: true,
                                    ticks: {
                                        callback: function(value) {
                                            return '$' + value/1000 + 'K';
                                        }
                                    },
                                    grid: {
                                        color: '#e5e7eb',
                                        drawBorder: false,
                                        borderDash: [4, 4]
                                    }
                                },
                                x: {
                                    grid: {
                                        color: '#e5e7eb',
                                        drawBorder: false,
                                        borderDash: [4, 4]
                                    }
                                }
                            },
                            hover: {
                                mode: 'nearest',
                                intersect: true,
                                backgroundColor: 'transparent' // This removes the hover box color
                            }
                        }
                    });

                    // Handle window resize
                    window.addEventListener('resize', () => {
                        chart.resize();
                    });
                }

                // Initial render
                renderMarketValue(marketValueData);
            </script>
        </section>

        <!-- Key Incidents -->
        <section section-name="Key Incidents" id="keyIncidentsSection" class="p-6 hidden">
            <div class="flex flex-col md:flex-row justify-center md:justify-between items-center mb-4">
                <h2 class="text-2xl font-bold">Key Incidents</h2>
                <span class="text-lg font-semibold" id="incidentCount"></span>
            </div>
            <p class="text-gray-700 mb-6 text-center md:text-left">This section contains event verification records for this vehicle.</p>
            
            <div class="grid md:grid-cols-2 lg:grid-cols-5 gap-2 border rounded-md p-2 sm:p-3 print:grid-cols-3" id="incidentGrid"></div>
        </section>
        
        <script>
            // Incident flags (0 = no record, 1 = has record)
            const incidentFlags = {
                insuranceLoss: 1,
                insuranceCompany: 0,
                auctionLemon: 0,
                abandonedTitle: 0,
                greyMarket: 0,
                loanLien: 1,
                repossessed: 0,
                correctedTitle: 0,
                duplicateTitle: 0,
                theft: 0
            };
        
            // Incident configuration
            const incidentConfig = [
                {
                    id: 'insuranceLoss',
                    title: 'Insurance Loss record',
                    getMessage: (hasRecord) => hasRecord 
                        ? 'The vehicle has Insurance Loss record'
                        : 'The vehicle has no Insurance Loss record'
                },
                {
                    id: 'insuranceCompany',
                    title: 'Titled to an insurance company record',
                    getMessage: (hasRecord) => hasRecord
                        ? 'The vehicle has titled to an insurance company record'
                        : 'The vehicle has no titled to an insurance company record'
                },
                {
                    id: 'auctionLemon',
                    title: 'Auction Lemon record/Manufacturer Buyback',
                    getMessage: (hasRecord) => hasRecord
                        ? 'The vehicle has auction lemon record'
                        : 'The vehicle title has no auction lemon record'
                },
                {
                    id: 'abandonedTitle',
                    title: 'Abandoned title record',
                    getMessage: (hasRecord) => hasRecord
                        ? 'The vehicle has abandoned title record'
                        : 'The vehicle has no abandoned title record'
                },
                {
                    id: 'greyMarket',
                    title: 'Grey market title record',
                    getMessage: (hasRecord) => hasRecord
                        ? 'The vehicle has grey market title record'
                        : 'The vehicle has no grey market title record'
                },
                {
                    id: 'loanLien',
                    title: 'Loan/Lien record',
                    getMessage: (hasRecord) => hasRecord
                        ? 'The vehicle has loan/lien record'
                        : 'The vehicle has no loan/lien record'
                },
                {
                    id: 'repossessed',
                    title: 'Repossessed record',
                    getMessage: (hasRecord) => hasRecord
                        ? 'The vehicle has repossessed record'
                        : 'The vehicle has no repossessed record'
                },
                {
                    id: 'correctedTitle',
                    title: 'Corrected title record',
                    getMessage: (hasRecord) => hasRecord
                        ? 'The vehicle has corrected title record'
                        : 'The vehicle has no corrected title record'
                },
                {
                    id: 'duplicateTitle',
                    title: 'Duplicate title record',
                    getMessage: (hasRecord) => hasRecord
                        ? 'The vehicle has duplicate title record'
                        : 'The vehicle has no duplicate title record'
                },
                {
                    id: 'theft',
                    title: 'Theft record',
                    getMessage: (hasRecord) => hasRecord
                        ? 'The vehicle has theft record'
                        : 'The vehicle has no theft record'
                }
            ];
        
            function generateIncidentCards() {
                const section = document.getElementById('keyIncidentsSection');
                const grid = document.getElementById('incidentGrid');
                const incidentCount = document.getElementById('incidentCount');

                // Check if data exists - more thorough null check
                const hasData = incidentFlags !== null && 
                            incidentFlags !== undefined && 
                            Object.keys(incidentFlags).length > 0;

                if (!hasData) {
                    section.classList.add('hidden');
                    return;
                }
        
                // Show section and update count
                section.classList.remove('hidden');
                const totalIncidents = Object.values(incidentFlags).reduce((sum, flag) => sum + flag, 0);
                incidentCount.textContent = `${totalIncidents} record(s) found`;
        
                // Generate incident cards
                grid.innerHTML = incidentConfig.map(incident => {
                    const hasRecord = incidentFlags[incident.id] === 1;
                    
                    return `
                        <div class="border border-black rounded-lg overflow-hidden hover-shadow-orange ${hasRecord ? 'grayyedBG-1-red' : 'grayyedBG-1'}">
                            <div class="px-2 py-3">
                                <div class="flex flex-col items-center gap-2 mb-2">
                                    ${hasRecord 
                                        ? '<i data-lucide="alert-circle" class="w-5 h-5 text-red-600"></i>'
                                        : '<i data-lucide="check-circle" class="w-5 h-5 text-green-600"></i>'
                                    }
                                    <span class="font-semibold text-center ${hasRecord ? 'text-red-600' : 'text-gray-900'}">${incident.title}</span>
                                </div>
                                <div class="w-full border-t my-2" style="border-color: currentColor; opacity: 1;"></div>
                                <p class="text-center ${hasRecord ? 'text-red-600' : 'text-gray-600'}">${incident.getMessage(hasRecord)}</p>
                            </div>
                        </div>
                    `;
                }).join('');
        
                // Initialize Lucide icons
                lucide.createIcons();
            }
        
            // Initialize incident cards
            generateIncidentCards();
        </script>

        <!-- Mileage Records -->
        <section section-name="Mileage Records" id="mileageRecordsSection" class="p-6 hidden">
            <div class="flex flex-col md:flex-row justify-center md:justify-between items-center mb-4">
                <h2 class="text-2xl font-bold">Mileage Records</h2>
                <span class="text-lg font-semibold" id="mileageRecordCount"></span>
            </div>
            <p class="text-gray-700 mb-6 text-center md:text-left">This section contains mileage records for this vehicle</p>
            
            <div class="mb-6" id="lastKnownRecord"></div>
            <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-2 print:grid-cols-2" id="mileageGrid"></div>
        </section>
        
        <script>
            // Mileage records data
            const mileageData = {
                records: [
                    {
                        date: '07/19/2000',
                        mileage: 20034
                    },
                    {
                        date: '05/15/2000',
                        mileage: 19500
                    }
                    // Add more records as needed
                ]
            };
        
            function generateMileageRecords() {
                const section = document.getElementById('mileageRecordsSection');
                const lastKnownSection = document.getElementById('lastKnownRecord');
                const grid = document.getElementById('mileageGrid');
                const recordCount = document.getElementById('mileageRecordCount');
        
                // Check if data exists
                const hasData = mileageData !== null && 
                               mileageData !== undefined && 
                               mileageData.records && 
                               mileageData.records.length > 0;
        
                if (!hasData) {
                    section.classList.add('hidden');
                    return;
                }
        
                // Show section and update count
                section.classList.remove('hidden');
                recordCount.textContent = `${mileageData.records.length} record(s) found`;
        
                // Get last known record
                const lastRecord = mileageData.records[0];
                lastKnownSection.innerHTML = `
                    <h3 class="text-xl font-semibold mb-4">Last known record: ${lastRecord.mileage.toLocaleString()}</h3>
                `;
        
                // Generate mileage record cards
                grid.innerHTML = mileageData.records.map(record => `
                    <div class="border border-black rounded-lg overflow-hidden hover-shadow-orange bg-[#FEF6D5]">
                        <div class="p-4 justify-between flex md:block">
                            <div class="md:mb-4">
                                <div class="font-semibold">Date Reported</div>
                                <div>${record.date}</div>
                            </div>
                            <div>
                                <div class="font-semibold">Mileage</div>
                                <div>${record.mileage.toLocaleString()}</div>
                            </div>
                        </div>
                    </div>
                `).join('');
            }
        
            // Initialize mileage records
            generateMileageRecords();
        </script>

        <!-- Accident Records -->
        <section section-name="Accident Records" id="accidentRecordsSection" class="p-6 hidden">
            <div class="flex flex-col md:flex-row justify-center md:justify-between items-center mb-4">
                <h2 class="text-2xl font-bold">Accident Records</h2>
                <span class="text-lg font-semibold" id="accidentRecordCount"></span>
            </div>
            <p class="text-gray-700 mb-6 text-center md:text-left">This section contains accident records for this vehicle</p>
            
            <div class="space-y-2 print:grid print:grid-cols-2 print:space-y-0 print:gap-2" id="accidentGrid"></div>
        </section>
        
        <script>
            // Accident records data
            const accidentData = {
                records: [
                    {
                        reportDate: '05/19/2019',
                        location: 'Kansas',
                    },
                    {
                        reportDate: '03/12/2018',
                        location: 'Missouri',
                    }
                ]
            };
        
            function generateAccidentRecords() {
                const section = document.getElementById('accidentRecordsSection');
                const grid = document.getElementById('accidentGrid');
                const recordCount = document.getElementById('accidentRecordCount');
        
                // Check if data exists
                const hasData = accidentData !== null && 
                               accidentData !== undefined && 
                               accidentData.records && 
                               accidentData.records.length > 0;
        
                if (!hasData) {
                    section.classList.add('hidden');
                    return;
                }
        
                // Show section and update count
                section.classList.remove('hidden');
                recordCount.textContent = `${accidentData.records.length} record(s) found`;
        
                // Generate accident record cards
                grid.innerHTML = accidentData.records.map(record => `
                    <div class="border border-black rounded-lg overflow-hidden hover-shadow-orange grayyedBG-1-red">
                        <div class="p-2 grid md:grid-cols-2 gap-2">
                            <div class="flex items-center gap-2">
                                <i data-lucide="bell-ring" class="w-5 h-5 text-red-600"></i>
                                <div>
                                    <div class="text-red-600 font-semibold">Reported on</div>
                                    <div class="text-red-600">${record.reportDate}</div>
                                </div>
                            </div>
                            <div class="flex items-center gap-2">
                                <i data-lucide="map-pin" class="w-5 h-5 text-red-600"></i>
                                <div>
                                    <div class="text-red-600 font-semibold">Located at</div>
                                    <div class="text-red-600">${record.location}</div>
                                </div>
                            </div>
                        </div>
                    </div>
                `).join('');
        
                // Initialize Lucide icons
                lucide.createIcons();
            }
        
            // Initialize accident records
            generateAccidentRecords();
        </script>

        <!-- Damage History Check -->
        <section section-name="Damage Verification" id="damageHistorySection" class="p-6 hidden">
            <div class="flex flex-col md:flex-row justify-center md:justify-between items-center mb-4">
                <h2 class="text-2xl font-bold">Damage History Check</h2>
                <span class="text-lg font-semibold" id="damageRecordCount"></span>
            </div>
            <p class="text-gray-700 mb-6 text-center md:text-left">This section highlights whether the vehicle has any recorded damage and verifies it against damage titles.</p>
            
            <div class="grid md:grid-cols-2 gap-2 print:grid-cols-2" id="damageGrid"></div>
        </section>
        
        <script>
            // Damage history flags (0 = no record/clean, 1 = has record/issue)
            const damageFlags = {
                fireDamage: 0,
                hailDamage: 0,
                floodDamage: 0,
                auctionJunk: 0,
                recycling: 0,
                structural: 0,
                salvageAuction: 1,
                minorMajorDamage: 1,
                auctionRebuildable: 0,
                dentScratches: 0
            };
        
            // Damage type configuration
            const damageConfig = [
                {
                    id: 'fireDamage',
                    title: 'Non-title fire damaged',
                    getMessage: (hasRecord) => hasRecord
                        ? 'The vehicle has fire damage record'
                        : 'The vehicle title has no fire damage record'
                },
                {
                    id: 'hailDamage',
                    title: 'Non-title hail damaged',
                    getMessage: (hasRecord) => hasRecord
                        ? 'The vehicle has hail damage record'
                        : 'The vehicle title has no hail damage record'
                },
                {
                    id: 'floodDamage',
                    title: 'Non-title flood damaged',
                    getMessage: (hasRecord) => hasRecord
                        ? 'The vehicle has flood damage record'
                        : 'The vehicle title has no flood damage record'
                },
                {
                    id: 'auctionJunk',
                    title: 'Auction junk or scrapped',
                    getMessage: (hasRecord) => hasRecord
                        ? 'The vehicle has record of auction junk'
                        : 'The vehicle title has no record of auction junk'
                },
                {
                    id: 'recycling',
                    title: 'Recycling facility',
                    getMessage: (hasRecord) => hasRecord
                        ? 'The vehicle has record of recycling facility'
                        : 'The vehicle title has no record of recycling facility'
                },
                {
                    id: 'structural',
                    title: 'Structural alteration',
                    getMessage: (hasRecord) => hasRecord
                        ? 'The vehicle has structural damage record'
                        : 'The vehicle title has no structural damage record'
                },
                {
                    id: 'salvageAuction',
                    title: 'Salvage auction',
                    getMessage: (hasRecord) => hasRecord
                        ? 'The vehicle has salvage auction record'
                        : 'The vehicle title has no salvage auction record'
                },
                {
                    id: 'minorMajorDamage',
                    title: 'Minor/Major damage incident',
                    getMessage: (hasRecord) => hasRecord
                        ? 'The vehicle has Minor/Major damage incident'
                        : 'The vehicle title has no Minor/Major damage incident'
                },
                {
                    id: 'auctionRebuildable',
                    title: 'Auction rebuildable',
                    getMessage: (hasRecord) => hasRecord
                        ? 'The vehicle has auction rebuildable record'
                        : 'The vehicle title has no auction rebuildable record'
                },
                {
                    id: 'dentScratches',
                    title: 'Dent and Scratches',
                    getMessage: (hasRecord) => hasRecord
                        ? 'The vehicle has dent and scratches record'
                        : 'The vehicle title has no dent and scratches record'
                }
            ];
        
            function generateDamageHistory() {
                const section = document.getElementById('damageHistorySection');
                const grid = document.getElementById('damageGrid');
                const recordCount = document.getElementById('damageRecordCount');
        
                // Check if data exists
                const hasData = damageFlags !== null && 
                               damageFlags !== undefined && 
                               Object.keys(damageFlags).length > 0;
        
                if (!hasData) {
                    section.classList.add('hidden');
                    return;
                }
        
                // Show section and update count
                section.classList.remove('hidden');
                const totalDamage = Object.values(damageFlags).reduce((sum, flag) => sum + flag, 0);
                recordCount.textContent = `${totalDamage} record(s) found`;
        
                // Generate damage record cards
                grid.innerHTML = damageConfig.map(damage => {
                    const hasRecord = damageFlags[damage.id] === 1;
                    
                    return `
                        <div class="border border-black rounded-lg overflow-hidden hover-shadow-orange ${hasRecord ? 'grayyedBG-1-red' : 'grayyedBG-1'}">
                            <div class="p-2">
                                <div class="flex items-start gap-2 items-center">
                                    <div class="mt-1">
                                        ${hasRecord 
                                            ? '<i data-lucide="alert-circle" class="w-8 h-8 text-red-600"></i>'
                                            : '<i data-lucide="check-circle" class="w-8 h-8 text-green-600"></i>'
                                        }
                                    </div>
                                    <div>
                                        <h3 class="font-semibold ${hasRecord ? 'text-red-600' : 'text-gray-900'}">${damage.title}</h3>
                                        <p class="${hasRecord ? 'text-red-600' : 'text-gray-600'}">${damage.getMessage(hasRecord)}</p>
                                    </div>
                                </div>
                            </div>
                        </div>
                    `;
                }).join('');
        
                // Initialize Lucide icons
                lucide.createIcons();
            }
        
            // Initialize damage history
            generateDamageHistory();
        </script>

        <!-- Theft Records -->
        <section section-name="Theft Records" id="theftRecordsSection" class="p-6 hidden">
            <div class="flex flex-col md:flex-row justify-center md:justify-between items-center mb-4">
                <h2 class="text-2xl font-bold">Theft Records</h2>
                <span class="text-lg font-semibold" id="theftRecordCount"></span>
            </div>
            <p class="text-gray-700 mb-6 text-center md:text-left">This section lists active theft and theft recovery records for this VIN.</p>
            
            <!-- Table for desktop -->
            <div class="hidden md:block overflow-x-auto">
                <table id="theftTable" class="w-full">
                    <thead class="bg-[#2B2B2B] text-white">
                        <tr>
                            <th class="p-4 text-center border border-white">Reported As Stolen?</th>
                            <th class="p-4 text-center border border-white">Stolen Date</th>
                            <th class="p-4 text-center border border-white">Location</th>
                            <th class="p-4 text-center border border-white">License Plate</th>
                            <th class="p-4 text-center border border-white">Color</th>
                        </tr>
                    </thead>
                    <tbody id="theftTableBody"></tbody>
                </table>
            </div>
        
            <!-- Cards for mobile -->
            <div class="md:hidden space-y-4 print:grid print:grid-cols-2 print:space-y-0 print:gap-4" id="theftCardGrid"></div>
        </section>
        
        <script>
            // Theft records data
            const theftData = {
                records: [
                    {
                        reported: 'Yes',
                        date: '15/5/21',
                        location: 'East Brunswick NJ',
                        plate: 'T45CYP',
                        color: 'Black'
                    },
                    {
                        reported: 'Yes',
                        date: '03/12/20',
                        location: 'Newark NJ',
                        plate: 'X78ABD',
                        color: 'White'
                    },
                    {
                        reported: 'No',
                        date: '22/8/20',
                        location: 'Jersey City NJ',
                        plate: 'P92MNK',
                        color: 'Red'
                    },
                    {
                        reported: 'Yes',
                        date: '05/2/20',
                        location: 'Trenton NJ',
                        plate: 'H33WLP',
                        color: 'Silver'
                    }
                ]
            };
        
            function generateTheftRecords() {
                const section = document.getElementById('theftRecordsSection');
                const theftTable = document.getElementById('theftTable');
                const tableBody = document.getElementById('theftTableBody');
                const cardGrid = document.getElementById('theftCardGrid');
                const recordCount = document.getElementById('theftRecordCount');
        
                // Check if data exists
                const hasData = theftData !== null && 
                               theftData !== undefined && 
                               theftData.records && 
                               theftData.records.length > 0;

                console.log(hasData);
        
                if (!hasData) {
                    section.classList.remove('hidden');
                    theftTable.classList.add('hidden');
                    const noRecordsMessage = createNoRecordsMessage('Theft');
                    section.appendChild(noRecordsMessage);
                    return;
                }
        
                // Show section and update count
                section.classList.remove('hidden');
                recordCount.textContent = `${theftData.records.length} record(s) found`;
        
                // Generate table rows for desktop
                tableBody.innerHTML = theftData.records.map(record => `
                    <tr class="border-b hover:bg-gray-50 text-center">
                        <td class="p-4">${record.reported}</td>
                        <td class="p-4">${record.date}</td>
                        <td class="p-4">${record.location}</td>
                        <td class="p-4">${record.plate}</td>
                        <td class="p-4">${record.color}</td>
                    </tr>
                `).join('');
        
                // Generate cards for mobile
                cardGrid.innerHTML = theftData.records.map(record => `
                    <div class="border rounded-lg p-3 space-y-3">
                        <div class="grid grid-cols-2 gap-2">
                            <div>
                                <div class="font-semibold text-gray-600">Reported As Stolen?</div>
                                <div>${record.reported}</div>
                            </div>
                            <div>
                                <div class="font-semibold text-gray-600">Stolen Date</div>
                                <div>${record.date}</div>
                            </div>
                        </div>
                        <div>
                            <div class="font-semibold text-gray-600">Location</div>
                            <div>${record.location}</div>
                        </div>
                        <div class="grid grid-cols-2 gap-2">
                            <div>
                                <div class="font-semibold text-gray-600">License Plate</div>
                                <div>${record.plate}</div>
                            </div>
                            <div>
                                <div class="font-semibold text-gray-600">Color</div>
                                <div>${record.color}</div>
                            </div>
                        </div>
                    </div>
                `).join('');
            }
        
            // Initialize theft records
            generateTheftRecords();
        </script>

        <!-- Lien/Loan Records -->
        <section section-name="Lien/Loan Records" id="lienRecordsSection" class="p-6 hidden">
            <div class="flex flex-col md:flex-row justify-center md:justify-between items-center mb-4">
                <h2 class="text-2xl font-bold">Lien/Loan Records</h2>
                <span class="text-lg font-semibold" id="lienRecordCount"></span>
            </div>
            <p class="text-gray-700 mb-6 text-center md:text-left">This record shows that someone else has a right of possession on the vehicle - usually whoever leant the owner the money for the car. You shouldn't buy the car unless the lienholder is going to release the lien.</p>
            
            <!-- Table for desktop -->
            <div class="hidden md:block overflow-x-auto">
                <table id="lienTableContent" class="w-full">
                    <thead class="bg-[#2B2B2B] text-white">
                        <tr>
                            <th class="p-4 text-center">Event Date</th>
                            <th class="p-4 text-center">Location</th>
                            <th class="p-4 text-center">Data Source</th>
                        </tr>
                    </thead>
                    <tbody id="lienTableBody"></tbody>
                </table>
            </div>
        
            <!-- Cards for mobile -->
            <div class="md:hidden space-y-4 print:grid print:grid-cols-2 print:space-y-0 print:gap-4" id="lienCardGrid"></div>
        </section>
        
        <script>
            // Lien records data
            const lienData = {
                records: [
                    {
                        date: '08/09/2019',
                        location: 'ROGERSVILLE, MO',
                        source: 'Federal Motor Vehicle Records'
                    },
                    {
                        date: '12/15/2018',
                        location: 'SPRINGFIELD, MO',
                        source: 'State DMV Records'
                    },
                    {
                        date: '03/22/2018',
                        location: 'KANSAS CITY, MO',
                        source: 'County Records'
                    }
                ]
            };
        
            function generateLienRecords() {
                const section = document.getElementById('lienRecordsSection');
                const tableBody = document.getElementById('lienTableBody');
                const lienTableContent = document.getElementById('lienTableContent');
                const cardGrid = document.getElementById('lienCardGrid');
                const recordCount = document.getElementById('lienRecordCount');
        
                // Check if data exists
                const hasData = lienData !== null && 
                               lienData !== undefined && 
                               lienData.records && 
                               lienData.records.length > 0;
        
                if (!hasData) {
                    section.classList.remove('hidden');
                    lienTableContent.classList.add('hidden');
                    const noRecordsMessageLien = createNoRecordsMessage('Lien Records');
                    section.appendChild(noRecordsMessageLien);
                    return;
                }
        
                // Show section and update count
                section.classList.remove('hidden');
                recordCount.textContent = `${lienData.records.length} record(s) found`;
        
                // Generate table rows for desktop
                tableBody.innerHTML = lienData.records.map(record => `
                    <tr class="border-b hover:bg-gray-50 text-center">
                        <td class="p-4 text-center">${record.date}</td>
                        <td class="p-4 text-center">${record.location}</td>
                        <td class="p-4 text-center">${record.source}</td>
                    </tr>
                `).join('');
        
                // Generate cards for mobile
                cardGrid.innerHTML = lienData.records.map(record => `
                    <div class="border rounded-lg p-3 space-y-3">
                        <div>
                            <div class="font-semibold text-gray-600 text-sm">Event Date</div>
                            <div>${record.date}</div>
                        </div>
                        <div>
                            <div class="font-semibold text-gray-600 text-sm">Location</div>
                            <div>${record.location}</div>
                        </div>
                        <div>
                            <div class="font-semibold text-gray-600 text-sm">Data Source</div>
                            <div>${record.source}</div>
                        </div>
                    </div>
                `).join('');
            }
        
            // Initialize lien records
            generateLienRecords();
        </script>

        <!-- DVH -->
        <section section-name="Detailed Vehicle History" id="detailedHistorySection" class="p-6 hidden">
            <div class="flex flex-col md:flex-row justify-center md:justify-between items-center mb-4">
                <h2 class="text-2xl font-bold">Detailed Vehicle History</h2>
                <span class="text-lg font-semibold" id="historyRecordCount"></span>
            </div>
            <p class="text-gray-700 mb-6 text-center md:text-left">This section gives you a comprehensive and detailed information recorded in this VIN.</p>
            
            <!-- Table for desktop -->
            <div class="hidden md:block overflow-x-auto">
                <table id="historyTableContent" class="w-full">
                    <thead class="bg-[#2B2B2B] text-white">
                        <tr>
                            <th class="p-4 text-left whitespace-nowrap">Date</th>
                            <th class="p-4 text-center border border-white">Source</th>
                            <th class="p-4 text-center border border-white">Location</th>
                            <th class="p-4 text-center border border-white">Odometer</th>
                            <th class="p-4 text-center border border-white">Details</th>
                        </tr>
                    </thead>
                    <tbody id="historyTableBody"></tbody>
                </table>
            </div>
        
            <!-- Cards for mobile -->
            <div class="md:hidden space-y-4 print:space-y-0 print:grid grid-cols-2 gap-4" id="historyCardGrid"></div>
        </section>
        
        <script>
            // Detailed history data
            const historyData = {
                records: [
                    {
                        date: '07/19/2000',
                        source: 'Federal Motor Vehicle Records',
                        location: 'LEBO, KS',
                        odometer: '20,034',
                        details: 'Title'
                    },
                    {
                        date: '07/19/2000',
                        source: 'Federal Motor Vehicle Records',
                        location: 'LEBO, KS',
                        odometer: 'N/A',
                        details: 'Registration Event/renewal\nExcluded/exempt'
                    },
                    {
                        date: '07/31/2018',
                        source: 'Federal Motor Vehicle Records',
                        location: 'EMPORIA, KS',
                        odometer: 'N/A',
                        details: 'Title\nRegistration Event/renewal'
                    },
                    {
                        date: '05/19/2019',
                        source: 'State Agency',
                        location: 'KS',
                        odometer: 'N/A',
                        details: 'Left Side Impact With Another Vehicle(case #:2019011219)\nLeft Side Impact Collision\nAccident Reported(report #:19-01901)\nVehicle Damage Reported As Disabling\nVehicle Was Towed'
                    },
                    {
                        date: '08/09/2019',
                        source: 'Federal Motor Vehicle Records',
                        location: 'ROGERSVILLE, MO',
                        odometer: 'N/A',
                        details: 'Title(lien Reported)\nSalvage\nExcluded/exempt'
                    },
                    {
                        date: '01/23/2020',
                        source: 'Federal Motor Vehicle Records',
                        location: 'IRRIGON, OR',
                        odometer: 'N/A',
                        details: 'Title\nReconstructed\nInsurance Loss\nExcluded/exempt'
                    }
                ]
            };
        
            function generateDetailedHistory() {
                const section = document.getElementById('detailedHistorySection');
                const tableContent = document.getElementById('historyTableContent');
                const tableBody = document.getElementById('historyTableBody');
                const cardGrid = document.getElementById('historyCardGrid');
                const recordCount = document.getElementById('historyRecordCount');
        
                // Check if data exists
                const hasData = historyData !== null && 
                               historyData !== undefined && 
                               historyData.records && 
                               historyData.records.length > 0;
        
                if (!hasData) {
                    section.classList.remove('hidden');
                    tableContent.classList.add('hidden');
                    const noRecordsMessage = createNoRecordsMessage('Detailed Vehicle History');
                    section.appendChild(noRecordsMessage);
                    return;
                }
        
                // Show section and update count
                section.classList.remove('hidden');
                recordCount.textContent = `${historyData.records.length} record(s) found`;
        
                // Generate table rows for desktop
                tableBody.innerHTML = historyData.records.map(record => `
                    <tr class="border-b hover:bg-gray-50 text-center">
                        <td class="p-4 whitespace-nowrap">${record.date}</td>
                        <td class="p-4">${record.source}</td>
                        <td class="p-4">${record.location}</td>
                        <td class="p-4">${record.odometer}</td>
                        <td class="p-4">
                            ${record.details.split('\n').map(detail => `
                                <div>${detail}</div>
                            `).join('')}
                        </td>
                    </tr>
                `).join('');
        
                // Generate cards for mobile
                cardGrid.innerHTML = historyData.records.map(record => `
                    <div class="border rounded-lg p-3 space-y-3 bg-white">
                        <div class="grid grid-cols-2 gap-2">
                            <div>
                                <div class="text-sm font-semibold text-gray-600">Date</div>
                                <div>${record.date}</div>
                            </div>
                            <div>
                                <div class="text-sm font-semibold text-gray-600">Location</div>
                                <div>${record.location}</div>
                            </div>
                        </div>
                        
                        <div>
                            <div class="text-sm font-semibold text-gray-600">Source</div>
                            <div>${record.source}</div>
                        </div>
        
                        <div>
                            <div class="text-sm font-semibold text-gray-600">Odometer</div>
                            <div>${record.odometer}</div>
                        </div>
        
                        <div>
                            <div class="text-sm font-semibold text-gray-600">Details</div>
                            <div class="space-y-1">
                                ${record.details.split('\n').map(detail => `
                                    <div>${detail}</div>
                                `).join('')}
                            </div>
                        </div>
                    </div>
                `).join('');
            }
        
            // Initialize detailed history
            generateDetailedHistory();
        </script>

        <!-- Dummy Record For No Data -->
        <section section-name="Dummy Record For No Data" id="dummyRecordsSection" class="p-6 hidden">
            <div class="flex flex-col md:flex-row justify-center md:justify-between items-center mb-4">
                <h2 class="text-2xl font-bold">Dummy Record For No Data</h2>
                <span class="text-lg font-semibold" id="dummyRecordCount"></span>
            </div>
            <p class="text-gray-700 mb-6 text-center md:text-left">This is the UI when there is no data. A yellow box will appear with the section title and a message indicating 'No record'.</p>
            
            <!-- Table for desktop -->
            <div class="hidden md:block overflow-x-auto">
                <table id="dummyTableContent" class="w-full">
                    <thead class="bg-[#2B2B2B] text-white">
                        <tr>
                            <th class="p-4 text-center">Auction Date</th>
                            <th class="p-4 text-center">Auction Company</th>
                            <th class="p-4 text-center">Location</th>
                            <th class="p-4 text-center">Damage Type</th>
                            <th class="p-4 text-center">Sale Status</th>
                        </tr>
                    </thead>
                    <tbody id="dummyTableBody"></tbody>
                </table>
            </div>

            <!-- Cards for mobile -->
            <div class="md:hidden space-y-4" id="dummyCardGrid"></div>
        </section>

        <script>
            // Dummy records data
            const dummyData = {
                // records: [
                //     {
                //         date: '09/15/2022',
                //         company: 'AutoSalvage Inc.',
                //         location: 'PHOENIX, AZ',
                //         damageType: 'Flood',
                //         saleStatus: 'Sold'
                //     },
                //     {
                //         date: '03/22/2021',
                //         company: 'Wreck Auctions LLC',
                //         location: 'TUCSON, AZ',
                //         damageType: 'Collision',
                //         saleStatus: 'Unsold'
                //     },
                //     {
                //         date: '11/07/2020',
                //         company: 'Salvage Masters',
                //         location: 'FLAGSTAFF, AZ',
                //         damageType: 'Fire',
                //         saleStatus: 'Sold'
                //     }
                // ]
            };

            function generateDummyRecords() {
                const section = document.getElementById('dummyRecordsSection');
                const tableBody = document.getElementById('dummyTableBody');
                const dummyTableContent = document.getElementById('dummyTableContent');
                const cardGrid = document.getElementById('dummyCardGrid');
                const recordCount = document.getElementById('dummyRecordCount');

                // Check if data exists
                const hasData = dummyData !== null && 
                            dummyData !== undefined && 
                            dummyData.records && 
                            dummyData.records.length > 0;

                if (!hasData) {
                    section.classList.remove('hidden');
                    dummyTableContent.classList.add('hidden');
                    const noRecordsMessage = createNoRecordsMessage('Dummy Records');
                    section.appendChild(noRecordsMessage);
                    return;
                }

                // Show section and update count
                section.classList.remove('hidden');
                recordCount.textContent = `${dummyData.records.length} record(s) found`;

                // Generate table rows for desktop
                tableBody.innerHTML = dummyData.records.map(record => `
                    <tr class="border-b hover:bg-gray-50 text-center">
                        <td class="p-4 text-center">${record.date}</td>
                        <td class="p-4 text-center">${record.company}</td>
                        <td class="p-4 text-center">${record.location}</td>
                        <td class="p-4 text-center">${record.damageType}</td>
                        <td class="p-4 text-center">${record.saleStatus}</td>
                    </tr>
                `).join('');

                // Generate cards for mobile
                cardGrid.innerHTML = dummyData.records.map(record => `
                    <div class="border rounded-lg p-3 space-y-3">
                        <div>
                            <div class="font-semibold text-gray-600 text-sm">Auction Date</div>
                            <div>${record.date}</div>
                        </div>
                        <div>
                            <div class="font-semibold text-gray-600 text-sm">Auction Company</div>
                            <div>${record.company}</div>
                        </div>
                        <div>
                            <div class="font-semibold text-gray-600 text-sm">Location</div>
                            <div>${record.location}</div>
                        </div>
                        <div>
                            <div class="font-semibold text-gray-600 text-sm">Damage Type</div>
                            <div>${record.damageType}</div>
                        </div>
                        <div>
                            <div class="font-semibold text-gray-600 text-sm">Sale Status</div>
                            <div>${record.saleStatus}</div>
                        </div>
                    </div>
                `).join('');
            }

            // Initialize dummy records
            generateDummyRecords();
        </script>

        <!-- Banner 2 -->
        <section class="p-4 px-6 no-print">
            <div class="grayyedBG-1-blue p-4 sm:p-8 rounded-lg mx-auto">
                <form id="reportForm" class="grid md:grid-cols-2 gap-8 items-center">
                    <!-- Left Column -->
                    <div class="space-y-6">
                        <h2 class="text-2xl md:text-3xl font-bold">
                            Get <span class="text-[#333]">20% Off</span> on Your Next Vehicle Report Search Now!
                        </h2>
                        
                        <p class="text-gray-700">Our vehicle history report provides information including-</p>
                        
                        <div class="grid grid-cols-1 gap-3 md:grid-cols-2 md:gap-4">
                            <div class="space-y-3">
                                <div class="flex items-center gap-2">
                                    <i data-lucide="check-circle" class="w-5 h-5 text-green-600"></i>
                                    <span>Auction Records</span>
                                </div>
                                <div class="flex items-center gap-2">
                                    <i data-lucide="check-circle" class="w-5 h-5 text-green-600"></i>
                                    <span>Accident Records</span>
                                </div>
                                <div class="flex items-center gap-2">
                                    <i data-lucide="check-circle" class="w-5 h-5 text-green-600"></i>
                                    <span>Theft record</span>
                                </div>
                            </div>
                            
                            <div class="space-y-3">
                                <div class="flex items-center gap-2">
                                    <i data-lucide="check-circle" class="w-5 h-5 text-green-600"></i>
                                    <span>Sales Records</span>
                                </div>
                                <div class="flex items-center gap-2">
                                    <i data-lucide="check-circle" class="w-5 h-5 text-green-600"></i>
                                    <span>Title Checks</span>
                                </div>
                                <div class="flex items-center gap-2">
                                    <i data-lucide="check-circle" class="w-5 h-5 text-green-600"></i>
                                    <span>Odometer Rollback</span>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Right Column - Form -->
                    <div class="space-y-4">
                        <input 
                            type="text" 
                            id="reportForm_vin"
                            placeholder="Your 5-13 digit VIN" 
                            class="w-full p-3 rounded bg-[#222] text-white border border-gray-700 focus:outline-none focus:border-yellow-500"
                        >
                        <input 
                            type="email" 
                            id="reportForm_email"
                            placeholder="Your email address" 
                            class="w-full p-3 rounded bg-[#222] text-white border border-gray-700 focus:outline-none focus:border-yellow-500"
                        >
                        <input 
                            type="tel" 
                            id="reportForm_phone"
                            placeholder="Your phone number" 
                            class="w-full p-3 rounded bg-[#222] text-white border border-gray-700 focus:outline-none focus:border-yellow-500"
                        >
                        <div id="reportForm_errorMessage" class="text-red-500"></div>
                        <div class="flex flex-col sm:flex-row items-center gap-4">
                            <button id="reportForm_submit" type="submit" class="w-full sm:w-auto px-6 py-3 bg-[#ffd700] text-black font-semibold rounded hover:bg-[#e6c200] transition-colors">
                                Get Your Report
                            </button>
                            <a href="#" class="flex items-center gap-1 text-gray-700 hover:text-gray-900">
                                View Sample
                                <i data-lucide="arrow-right" class="w-4 h-4"></i>
                            </a>
                        </div>
                    </div>
                </form>
            </div>
        </section>

        <script>
            // Initialize Lucide icons
            lucide.createIcons();

            document.addEventListener('DOMContentLoaded', function() {
                const form = document.getElementById('reportForm');
                const submitButton = document.getElementById('reportForm_submit');
                const errorMessageElement = document.getElementById('reportForm_errorMessage');

                submitButton.addEventListener('click', function(e) {
                    e.preventDefault();
                    bannerForm(
                        'vhr',
                        'reportForm',
                        document.getElementById('reportForm_vin').value,
                        document.getElementById('reportForm_email').value,
                        document.getElementById('reportForm_phone').value,
                        errorMessageElement
                    );
                });
            });
        </script>

        <!-- footer -->
        <footer class="py-1 px-4 md:px-8 ">
            <div class="mx-auto space-y-4 border-t border-gray-200 py-4">
                <!-- Disclaimer Section -->
                <div class="space-y-2">
                    <h2 class="text-xl font-bold text-gray-900">Disclaimer</h2>
                    <p class="text-gray-700 text-sm md:text-base leading-relaxed">
                        The compilation of Classic Decoder vehicle history report requires data third party data suppliers and other various data sources. Classic Decoder relies on its data sources for the accuracy and reliability of its information. Therefore, Classic Decoder or its agents assume no responsibility for errors or omissions in this report. In addition, Classic Decoder, expressly disclaims all warranties, express or implied, including any implied warranties of merchantability or fitness for a particular purpose.
                    </p>
                </div>
        
                <!-- Copyright and Social Links -->
                <div class="flex flex-col md:flex-row justify-between items-center gap-4 pt-1">
                    <p class="text-gray-600 text-sm">
                        © 2025 <a href="/" target="_blank">Classic Decoder</a>. All Rights Reserved.
                    </p>
                    
                    <!-- Social Media Icons -->
                    <div class="flex items-center gap-2 sm:gap-4 no-print">
                        <span onclick="copyURL()" class="w-8 h-8 transition-all duration-300 ease-in-out hover:-translate-y-1 hover:shadow-lg hover:shadow-[#D5B002]/20 rounded-full cursor-pointer">
                            <img src="assets/copy.svg" class="w-full h-auto" alt="Copy">
                        </span>
                        <a href="https://www.facebook.com/classicdecodercom" class="w-8 h-8 transition-all duration-300 ease-in-out hover:-translate-y-1 hover:shadow-lg hover:shadow-[#D5B002]/20 rounded-full" target="_blank">
                            <img src="assets/facebook.svg" class="w-full h-auto">
                        </a>
                        <a href="https://twitter.com/ClassicDecoder" class="w-8 h-8 transition-all duration-300 ease-in-out hover:-translate-y-1 hover:shadow-lg hover:shadow-[#D5B002]/20 rounded-full" target="_blank">
                            <img src="assets/twitter.svg" class="w-full h-auto">
                        </a>
                        <a href="mailto:support@classicdecoder.com" class="w-8 h-8 transition-all duration-300 ease-in-out hover:-translate-y-1 hover:shadow-lg hover:shadow-[#D5B002]/20 rounded-full" target="_blank">
                            <img src="assets/gmail.svg" class="w-full h-auto">
                        </a>
                        <a href="https://www.linkedin.com/company/classicdecoder" class="w-8 h-8 transition-all duration-300 ease-in-out hover:-translate-y-1 hover:shadow-lg hover:shadow-[#D5B002]/20 rounded-full" target="_blank">
                            <img src="assets/linkedin.svg" class="w-full h-auto">
                        </a>
                        <a href="https://www.pinterest.com/classicdecoder/" class="w-8 h-8 transition-all duration-300 ease-in-out hover:-translate-y-1 hover:shadow-lg hover:shadow-[#D5B002]/20 rounded-full" target="_blank">
                            <img src="assets/pinterest.svg" class="w-full h-auto">
                        </a>
                        <a href="https://secure.livechatinc.com/licence/10186117/v2/open_chat.cgi?groups=0" class="w-8 h-8 transition-all duration-300 ease-in-out hover:-translate-y-1 hover:shadow-lg hover:shadow-[#D5B002]/20 rounded-full" target="_blank">
                            <img src="assets/livechat.svg" class="w-full h-auto">
                        </a>
                    </div>
                </div>
            </div>
        </footer>

        <!-- Notification -->
        <div 
        id="notification" 
        class="fixed top-5 left-1/2 transform -translate-x-1/2 bg-[#f2e5d7] text-black px-6 py-3 rounded shadow-2xl border z-50 opacity-0 transition-opacity duration-300 hidden">
        Link copied to clipboard!
        </div>

        <script>
            // Function to copy URL and show notification
            function copyURL() {
              // Copy current URL to clipboard
              navigator.clipboard.writeText(window.location.href).then(() => {
                // Show the notification
                const notification = document.getElementById('notification');
                notification.classList.remove('hidden');
                notification.classList.add('opacity-100');
        
                // Hide the notification after 2 seconds
                setTimeout(() => {
                  notification.classList.remove('opacity-100');
                  notification.classList.add('opacity-0');
                  setTimeout(() => notification.classList.add('hidden'), 300); // Wait for opacity transition
                }, 2000);
              }).catch(err => console.error('Failed to copy URL:', err));
            }
        </script>
    </div>

    <!-- Fullscreen Modal -->
    <div id="fullscreenModal" class="fixed inset-0 bg-black bg-opacity-75 flex items-center justify-center z-50 hidden">
        <img id="fullscreenImage" src="/placeholder.svg" alt="Fullscreen view" class="w-4/5 max-w-[900px] max-h-full object-contain">
    </div>
    <script>
        // Add click event listeners to fullscreen icons
        const fullscreenIcons = document.querySelectorAll('.fullscreen-icon');
        const fullscreenModal = document.getElementById('fullscreenModal');
        const fullscreenImage = document.getElementById('fullscreenImage');

        fullscreenIcons.forEach(icon => {
            icon.addEventListener('click', function(e) {
                const imageSrc = this.previousElementSibling.src;
                console.log(imageSrc);
                e.stopPropagation();
                fullscreenImage.src = imageSrc;
                fullscreenModal.classList.remove('hidden');
            });
        });

        fullscreenModal.addEventListener('click', function() {
            this.classList.add('hidden');
        });
    </script>
</body>
</html>